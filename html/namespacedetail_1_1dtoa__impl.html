<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>aDDM-Toolbox-GPU: detail::dtoa_impl Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">aDDM-Toolbox-GPU
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacedetail.html">detail</a></li><li class="navelem"><a class="el" href="namespacedetail_1_1dtoa__impl.html">dtoa_impl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">detail::dtoa_impl Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>implements the Grisu2 algorithm for binary to decimal floating-point conversion.  
<a href="namespacedetail_1_1dtoa__impl.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdetail_1_1dtoa__impl_1_1boundaries.html">boundaries</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdetail_1_1dtoa__impl_1_1cached__power.html">cached_power</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3c879bf97b806cacbcbb2da07a5ff5c8"><td class="memTemplParams" colspan="2">template&lt;typename Target , typename Source &gt; </td></tr>
<tr class="memitem:a3c879bf97b806cacbcbb2da07a5ff5c8"><td class="memTemplItemLeft" align="right" valign="top">Target&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#a3c879bf97b806cacbcbb2da07a5ff5c8">reinterpret_bits</a> (const Source source)</td></tr>
<tr class="separator:a3c879bf97b806cacbcbb2da07a5ff5c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a5ccf11847aab7a0f42f587b33935df"><td class="memTemplParams" colspan="2">template&lt;typename FloatType &gt; </td></tr>
<tr class="memitem:a6a5ccf11847aab7a0f42f587b33935df"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structdetail_1_1dtoa__impl_1_1boundaries.html">boundaries</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#a6a5ccf11847aab7a0f42f587b33935df">compute_boundaries</a> (FloatType value)</td></tr>
<tr class="separator:a6a5ccf11847aab7a0f42f587b33935df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29ae6574f6be09a5c8ab08da9a3f71b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdetail_1_1dtoa__impl_1_1cached__power.html">cached_power</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#a29ae6574f6be09a5c8ab08da9a3f71b4">get_cached_power_for_binary_exponent</a> (int e)</td></tr>
<tr class="separator:a29ae6574f6be09a5c8ab08da9a3f71b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04eb234a28617519974fc962cd4da666"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#a04eb234a28617519974fc962cd4da666">find_largest_pow10</a> (const std::uint32_t n, std::uint32_t &amp;pow10)</td></tr>
<tr class="separator:a04eb234a28617519974fc962cd4da666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a15efcb5c2157ea0e1375b98ef0e83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#a73a15efcb5c2157ea0e1375b98ef0e83">grisu2_round</a> (char *buf, int len, std::uint64_t dist, std::uint64_t delta, std::uint64_t rest, std::uint64_t ten_k)</td></tr>
<tr class="separator:a73a15efcb5c2157ea0e1375b98ef0e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae877aa13ab872c99a1c614e5e1524807"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#ae877aa13ab872c99a1c614e5e1524807">grisu2_digit_gen</a> (char *buffer, int &amp;length, int &amp;decimal_exponent, <a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> M_minus, <a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> w, <a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> M_plus)</td></tr>
<tr class="separator:ae877aa13ab872c99a1c614e5e1524807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad549352ed1a9676a092d143a2daa3dee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#ad549352ed1a9676a092d143a2daa3dee">grisu2</a> (char *buf, int &amp;len, int &amp;decimal_exponent, <a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> m_minus, <a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> v, <a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a> m_plus)</td></tr>
<tr class="separator:ad549352ed1a9676a092d143a2daa3dee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf6bc05c54068a5930f66c2e803e8b8"><td class="memTemplParams" colspan="2">template&lt;typename FloatType &gt; </td></tr>
<tr class="memitem:abdf6bc05c54068a5930f66c2e803e8b8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#abdf6bc05c54068a5930f66c2e803e8b8">grisu2</a> (char *buf, int &amp;len, int &amp;decimal_exponent, FloatType value)</td></tr>
<tr class="separator:abdf6bc05c54068a5930f66c2e803e8b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6efd46b9558b99b68c674ad02b395d25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="json_8hpp.html#a5f2aaec3b681d0a72f7d6e90b70cdcd1">JSON_HEDLEY_RETURNS_NON_NULL</a> char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#a6efd46b9558b99b68c674ad02b395d25">append_exponent</a> (char *buf, int e)</td></tr>
<tr class="memdesc:a6efd46b9558b99b68c674ad02b395d25"><td class="mdescLeft">&#160;</td><td class="mdescRight">appends a decimal representation of e to buf  <a href="namespacedetail_1_1dtoa__impl.html#a6efd46b9558b99b68c674ad02b395d25">More...</a><br /></td></tr>
<tr class="separator:a6efd46b9558b99b68c674ad02b395d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7175c9997b110bce4526e3b7357e7b03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="json_8hpp.html#a5f2aaec3b681d0a72f7d6e90b70cdcd1">JSON_HEDLEY_RETURNS_NON_NULL</a> char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#a7175c9997b110bce4526e3b7357e7b03">format_buffer</a> (char *buf, int len, int decimal_exponent, int min_exp, int max_exp)</td></tr>
<tr class="memdesc:a7175c9997b110bce4526e3b7357e7b03"><td class="mdescLeft">&#160;</td><td class="mdescRight">prettify v = buf * 10^decimal_exponent  <a href="namespacedetail_1_1dtoa__impl.html#a7175c9997b110bce4526e3b7357e7b03">More...</a><br /></td></tr>
<tr class="separator:a7175c9997b110bce4526e3b7357e7b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a95c569b7627a9372686f1f77d73e8660"><td class="memItemLeft" align="right" valign="top">constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#a95c569b7627a9372686f1f77d73e8660">kAlpha</a> = -60</td></tr>
<tr class="separator:a95c569b7627a9372686f1f77d73e8660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae152a095d2dd1a6dd41ef8ad39c26e19"><td class="memItemLeft" align="right" valign="top">constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedetail_1_1dtoa__impl.html#ae152a095d2dd1a6dd41ef8ad39c26e19">kGamma</a> = -32</td></tr>
<tr class="separator:ae152a095d2dd1a6dd41ef8ad39c26e19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>implements the Grisu2 algorithm for binary to decimal floating-point conversion. </p>
<p>This implementation is a slightly modified version of the reference implementation which may be obtained from <a href="http://florian.loitsch.com/publications">http://florian.loitsch.com/publications</a> (bench.tar.gz).</p>
<p>The code is distributed under the MIT license, Copyright (c) 2009 Florian Loitsch.</p>
<p>For a detailed description of the algorithm see:</p>
<p>[1] Loitsch, "Printing Floating-Point Numbers Quickly and Accurately with
    Integers", Proceedings of the ACM SIGPLAN 2010 Conference on Programming Language Design and Implementation, PLDI 2010 [2] Burger, Dybvig, "Printing Floating-Point Numbers Quickly and Accurately", Proceedings of the ACM SIGPLAN 1996 Conference on Programming Language Design and Implementation, PLDI 1996 </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6efd46b9558b99b68c674ad02b395d25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6efd46b9558b99b68c674ad02b395d25">&#9670;&nbsp;</a></span>append_exponent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="json_8hpp.html#a5f2aaec3b681d0a72f7d6e90b70cdcd1">JSON_HEDLEY_RETURNS_NON_NULL</a> char* detail::dtoa_impl::append_exponent </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>appends a decimal representation of e to buf </p>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the element following the exponent. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>-1000 &lt; e &lt; 1000 </dd></dl>

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17749">17749</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l17750"></a><span class="lineno">17750</span>&#160;{</div>
<div class="line"><a name="l17751"></a><span class="lineno">17751</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(e &gt; -1000);</div>
<div class="line"><a name="l17752"></a><span class="lineno">17752</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(e &lt;  1000);</div>
<div class="line"><a name="l17753"></a><span class="lineno">17753</span>&#160; </div>
<div class="line"><a name="l17754"></a><span class="lineno">17754</span>&#160;    <span class="keywordflow">if</span> (e &lt; 0)</div>
<div class="line"><a name="l17755"></a><span class="lineno">17755</span>&#160;    {</div>
<div class="line"><a name="l17756"></a><span class="lineno">17756</span>&#160;        e = -e;</div>
<div class="line"><a name="l17757"></a><span class="lineno">17757</span>&#160;        *buf++ = <span class="charliteral">&#39;-&#39;</span>;</div>
<div class="line"><a name="l17758"></a><span class="lineno">17758</span>&#160;    }</div>
<div class="line"><a name="l17759"></a><span class="lineno">17759</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l17760"></a><span class="lineno">17760</span>&#160;    {</div>
<div class="line"><a name="l17761"></a><span class="lineno">17761</span>&#160;        *buf++ = <span class="charliteral">&#39;+&#39;</span>;</div>
<div class="line"><a name="l17762"></a><span class="lineno">17762</span>&#160;    }</div>
<div class="line"><a name="l17763"></a><span class="lineno">17763</span>&#160; </div>
<div class="line"><a name="l17764"></a><span class="lineno">17764</span>&#160;    <span class="keyword">auto</span> k = <span class="keyword">static_cast&lt;</span>std::uint32_t<span class="keyword">&gt;</span>(e);</div>
<div class="line"><a name="l17765"></a><span class="lineno">17765</span>&#160;    <span class="keywordflow">if</span> (k &lt; 10)</div>
<div class="line"><a name="l17766"></a><span class="lineno">17766</span>&#160;    {</div>
<div class="line"><a name="l17767"></a><span class="lineno">17767</span>&#160;        <span class="comment">// Always print at least two digits in the exponent.</span></div>
<div class="line"><a name="l17768"></a><span class="lineno">17768</span>&#160;        <span class="comment">// This is for compatibility with printf(&quot;%g&quot;).</span></div>
<div class="line"><a name="l17769"></a><span class="lineno">17769</span>&#160;        *buf++ = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l17770"></a><span class="lineno">17770</span>&#160;        *buf++ = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<span class="charliteral">&#39;0&#39;</span> + k);</div>
<div class="line"><a name="l17771"></a><span class="lineno">17771</span>&#160;    }</div>
<div class="line"><a name="l17772"></a><span class="lineno">17772</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (k &lt; 100)</div>
<div class="line"><a name="l17773"></a><span class="lineno">17773</span>&#160;    {</div>
<div class="line"><a name="l17774"></a><span class="lineno">17774</span>&#160;        *buf++ = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<span class="charliteral">&#39;0&#39;</span> + k / 10);</div>
<div class="line"><a name="l17775"></a><span class="lineno">17775</span>&#160;        k %= 10;</div>
<div class="line"><a name="l17776"></a><span class="lineno">17776</span>&#160;        *buf++ = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<span class="charliteral">&#39;0&#39;</span> + k);</div>
<div class="line"><a name="l17777"></a><span class="lineno">17777</span>&#160;    }</div>
<div class="line"><a name="l17778"></a><span class="lineno">17778</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l17779"></a><span class="lineno">17779</span>&#160;    {</div>
<div class="line"><a name="l17780"></a><span class="lineno">17780</span>&#160;        *buf++ = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<span class="charliteral">&#39;0&#39;</span> + k / 100);</div>
<div class="line"><a name="l17781"></a><span class="lineno">17781</span>&#160;        k %= 100;</div>
<div class="line"><a name="l17782"></a><span class="lineno">17782</span>&#160;        *buf++ = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<span class="charliteral">&#39;0&#39;</span> + k / 10);</div>
<div class="line"><a name="l17783"></a><span class="lineno">17783</span>&#160;        k %= 10;</div>
<div class="line"><a name="l17784"></a><span class="lineno">17784</span>&#160;        *buf++ = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<span class="charliteral">&#39;0&#39;</span> + k);</div>
<div class="line"><a name="l17785"></a><span class="lineno">17785</span>&#160;    }</div>
<div class="line"><a name="l17786"></a><span class="lineno">17786</span>&#160; </div>
<div class="line"><a name="l17787"></a><span class="lineno">17787</span>&#160;    <span class="keywordflow">return</span> buf;</div>
<div class="line"><a name="l17788"></a><span class="lineno">17788</span>&#160;}</div>
<div class="ttc" id="ajson_8hpp_html_a69f131cff49da1989667220173fbeae6"><div class="ttname"><a href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a></div><div class="ttdeci">#define JSON_ASSERT(x)</div><div class="ttdef"><b>Definition:</b> <a href="json_8hpp_source.html#l02544">json.hpp:2544</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a5ccf11847aab7a0f42f587b33935df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a5ccf11847aab7a0f42f587b33935df">&#9670;&nbsp;</a></span>compute_boundaries()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename FloatType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdetail_1_1dtoa__impl_1_1boundaries.html">boundaries</a> detail::dtoa_impl::compute_boundaries </td>
          <td>(</td>
          <td class="paramtype">FloatType&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute the (normalized) diyfp representing the input number 'value' and its boundaries.</p>
<dl class="section pre"><dt>Precondition</dt><dd>value must be finite and positive </dd></dl>

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17010">17010</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l17011"></a><span class="lineno">17011</span>&#160;{</div>
<div class="line"><a name="l17012"></a><span class="lineno">17012</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(std::isfinite(value));</div>
<div class="line"><a name="l17013"></a><span class="lineno">17013</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(value &gt; 0);</div>
<div class="line"><a name="l17014"></a><span class="lineno">17014</span>&#160; </div>
<div class="line"><a name="l17015"></a><span class="lineno">17015</span>&#160;    <span class="comment">// Convert the IEEE representation into a diyfp.</span></div>
<div class="line"><a name="l17016"></a><span class="lineno">17016</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17017"></a><span class="lineno">17017</span>&#160;    <span class="comment">// If v is denormal:</span></div>
<div class="line"><a name="l17018"></a><span class="lineno">17018</span>&#160;    <span class="comment">//      value = 0.F * 2^(1 - bias) = (          F) * 2^(1 - bias - (p-1))</span></div>
<div class="line"><a name="l17019"></a><span class="lineno">17019</span>&#160;    <span class="comment">// If v is normalized:</span></div>
<div class="line"><a name="l17020"></a><span class="lineno">17020</span>&#160;    <span class="comment">//      value = 1.F * 2^(E - bias) = (2^(p-1) + F) * 2^(E - bias - (p-1))</span></div>
<div class="line"><a name="l17021"></a><span class="lineno">17021</span>&#160; </div>
<div class="line"><a name="l17022"></a><span class="lineno">17022</span>&#160;    static_assert(std::numeric_limits&lt;FloatType&gt;::is_iec559,</div>
<div class="line"><a name="l17023"></a><span class="lineno">17023</span>&#160;                  <span class="stringliteral">&quot;internal error: dtoa_short requires an IEEE-754 floating-point implementation&quot;</span>);</div>
<div class="line"><a name="l17024"></a><span class="lineno">17024</span>&#160; </div>
<div class="line"><a name="l17025"></a><span class="lineno">17025</span>&#160;    constexpr <span class="keywordtype">int</span>      kPrecision = std::numeric_limits&lt;FloatType&gt;::digits; <span class="comment">// = p (includes the hidden bit)</span></div>
<div class="line"><a name="l17026"></a><span class="lineno">17026</span>&#160;    constexpr <span class="keywordtype">int</span>      kBias      = std::numeric_limits&lt;FloatType&gt;::max_exponent - 1 + (kPrecision - 1);</div>
<div class="line"><a name="l17027"></a><span class="lineno">17027</span>&#160;    constexpr <span class="keywordtype">int</span>      kMinExp    = 1 - kBias;</div>
<div class="line"><a name="l17028"></a><span class="lineno">17028</span>&#160;    constexpr std::uint64_t kHiddenBit = std::uint64_t{1} &lt;&lt; (kPrecision - 1); <span class="comment">// = 2^(p-1)</span></div>
<div class="line"><a name="l17029"></a><span class="lineno">17029</span>&#160; </div>
<div class="line"><a name="l17030"></a><span class="lineno">17030</span>&#160;    <span class="keyword">using</span> bits_type = <span class="keyword">typename</span> std::conditional&lt;kPrecision == 24, std::uint32_t, std::uint64_t &gt;::type;</div>
<div class="line"><a name="l17031"></a><span class="lineno">17031</span>&#160; </div>
<div class="line"><a name="l17032"></a><span class="lineno">17032</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> bits = <span class="keyword">static_cast&lt;</span>std::uint64_t<span class="keyword">&gt;</span>(reinterpret_bits&lt;bits_type&gt;(value));</div>
<div class="line"><a name="l17033"></a><span class="lineno">17033</span>&#160;    <span class="keyword">const</span> std::uint64_t E = bits &gt;&gt; (kPrecision - 1);</div>
<div class="line"><a name="l17034"></a><span class="lineno">17034</span>&#160;    <span class="keyword">const</span> std::uint64_t F = bits &amp; (kHiddenBit - 1);</div>
<div class="line"><a name="l17035"></a><span class="lineno">17035</span>&#160; </div>
<div class="line"><a name="l17036"></a><span class="lineno">17036</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_denormal = E == 0;</div>
<div class="line"><a name="l17037"></a><span class="lineno">17037</span>&#160;    <span class="keyword">const</span> diyfp v = is_denormal</div>
<div class="line"><a name="l17038"></a><span class="lineno">17038</span>&#160;                    ? diyfp(F, kMinExp)</div>
<div class="line"><a name="l17039"></a><span class="lineno">17039</span>&#160;                    : diyfp(F + kHiddenBit, static_cast&lt;int&gt;(E) - kBias);</div>
<div class="line"><a name="l17040"></a><span class="lineno">17040</span>&#160; </div>
<div class="line"><a name="l17041"></a><span class="lineno">17041</span>&#160;    <span class="comment">// Compute the boundaries m- and m+ of the floating-point value</span></div>
<div class="line"><a name="l17042"></a><span class="lineno">17042</span>&#160;    <span class="comment">// v = f * 2^e.</span></div>
<div class="line"><a name="l17043"></a><span class="lineno">17043</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17044"></a><span class="lineno">17044</span>&#160;    <span class="comment">// Determine v- and v+, the floating-point predecessor and successor if v,</span></div>
<div class="line"><a name="l17045"></a><span class="lineno">17045</span>&#160;    <span class="comment">// respectively.</span></div>
<div class="line"><a name="l17046"></a><span class="lineno">17046</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17047"></a><span class="lineno">17047</span>&#160;    <span class="comment">//      v- = v - 2^e        if f != 2^(p-1) or e == e_min                (A)</span></div>
<div class="line"><a name="l17048"></a><span class="lineno">17048</span>&#160;    <span class="comment">//         = v - 2^(e-1)    if f == 2^(p-1) and e &gt; e_min                (B)</span></div>
<div class="line"><a name="l17049"></a><span class="lineno">17049</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17050"></a><span class="lineno">17050</span>&#160;    <span class="comment">//      v+ = v + 2^e</span></div>
<div class="line"><a name="l17051"></a><span class="lineno">17051</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17052"></a><span class="lineno">17052</span>&#160;    <span class="comment">// Let m- = (v- + v) / 2 and m+ = (v + v+) / 2. All real numbers _strictly_</span></div>
<div class="line"><a name="l17053"></a><span class="lineno">17053</span>&#160;    <span class="comment">// between m- and m+ round to v, regardless of how the input rounding</span></div>
<div class="line"><a name="l17054"></a><span class="lineno">17054</span>&#160;    <span class="comment">// algorithm breaks ties.</span></div>
<div class="line"><a name="l17055"></a><span class="lineno">17055</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17056"></a><span class="lineno">17056</span>&#160;    <span class="comment">//      ---+-------------+-------------+-------------+-------------+---  (A)</span></div>
<div class="line"><a name="l17057"></a><span class="lineno">17057</span>&#160;    <span class="comment">//         v-            m-            v             m+            v+</span></div>
<div class="line"><a name="l17058"></a><span class="lineno">17058</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17059"></a><span class="lineno">17059</span>&#160;    <span class="comment">//      -----------------+------+------+-------------+-------------+---  (B)</span></div>
<div class="line"><a name="l17060"></a><span class="lineno">17060</span>&#160;    <span class="comment">//                       v-     m-     v             m+            v+</span></div>
<div class="line"><a name="l17061"></a><span class="lineno">17061</span>&#160; </div>
<div class="line"><a name="l17062"></a><span class="lineno">17062</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> lower_boundary_is_closer = F == 0 &amp;&amp; E &gt; 1;</div>
<div class="line"><a name="l17063"></a><span class="lineno">17063</span>&#160;    <span class="keyword">const</span> diyfp m_plus = diyfp(2 * v.f + 1, v.e - 1);</div>
<div class="line"><a name="l17064"></a><span class="lineno">17064</span>&#160;    <span class="keyword">const</span> diyfp m_minus = lower_boundary_is_closer</div>
<div class="line"><a name="l17065"></a><span class="lineno">17065</span>&#160;                          ? diyfp(4 * v.f - 1, v.e - 2)  <span class="comment">// (B)</span></div>
<div class="line"><a name="l17066"></a><span class="lineno">17066</span>&#160;                          : diyfp(2 * v.f - 1, v.e - 1); <span class="comment">// (A)</span></div>
<div class="line"><a name="l17067"></a><span class="lineno">17067</span>&#160; </div>
<div class="line"><a name="l17068"></a><span class="lineno">17068</span>&#160;    <span class="comment">// Determine the normalized w+ = m+.</span></div>
<div class="line"><a name="l17069"></a><span class="lineno">17069</span>&#160;    <span class="keyword">const</span> diyfp w_plus = diyfp::normalize(m_plus);</div>
<div class="line"><a name="l17070"></a><span class="lineno">17070</span>&#160; </div>
<div class="line"><a name="l17071"></a><span class="lineno">17071</span>&#160;    <span class="comment">// Determine w- = m- such that e_(w-) = e_(w+).</span></div>
<div class="line"><a name="l17072"></a><span class="lineno">17072</span>&#160;    <span class="keyword">const</span> diyfp w_minus = diyfp::normalize_to(m_minus, w_plus.e);</div>
<div class="line"><a name="l17073"></a><span class="lineno">17073</span>&#160; </div>
<div class="line"><a name="l17074"></a><span class="lineno">17074</span>&#160;    <span class="keywordflow">return</span> {diyfp::normalize(v), w_minus, w_plus};</div>
<div class="line"><a name="l17075"></a><span class="lineno">17075</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a04eb234a28617519974fc962cd4da666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04eb234a28617519974fc962cd4da666">&#9670;&nbsp;</a></span>find_largest_pow10()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int detail::dtoa_impl::find_largest_pow10 </td>
          <td>(</td>
          <td class="paramtype">const std::uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t &amp;&#160;</td>
          <td class="paramname"><em>pow10</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For n != 0, returns k, such that pow10 := 10^(k-1) &lt;= n &lt; 10^k. For n == 0, returns 1 and sets pow10 := 1. </p>

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17313">17313</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l17314"></a><span class="lineno">17314</span>&#160;{</div>
<div class="line"><a name="l17315"></a><span class="lineno">17315</span>&#160;    <span class="comment">// LCOV_EXCL_START</span></div>
<div class="line"><a name="l17316"></a><span class="lineno">17316</span>&#160;    <span class="keywordflow">if</span> (n &gt;= 1000000000)</div>
<div class="line"><a name="l17317"></a><span class="lineno">17317</span>&#160;    {</div>
<div class="line"><a name="l17318"></a><span class="lineno">17318</span>&#160;        pow10 = 1000000000;</div>
<div class="line"><a name="l17319"></a><span class="lineno">17319</span>&#160;        <span class="keywordflow">return</span> 10;</div>
<div class="line"><a name="l17320"></a><span class="lineno">17320</span>&#160;    }</div>
<div class="line"><a name="l17321"></a><span class="lineno">17321</span>&#160;    <span class="comment">// LCOV_EXCL_STOP</span></div>
<div class="line"><a name="l17322"></a><span class="lineno">17322</span>&#160;    <span class="keywordflow">if</span> (n &gt;= 100000000)</div>
<div class="line"><a name="l17323"></a><span class="lineno">17323</span>&#160;    {</div>
<div class="line"><a name="l17324"></a><span class="lineno">17324</span>&#160;        pow10 = 100000000;</div>
<div class="line"><a name="l17325"></a><span class="lineno">17325</span>&#160;        <span class="keywordflow">return</span>  9;</div>
<div class="line"><a name="l17326"></a><span class="lineno">17326</span>&#160;    }</div>
<div class="line"><a name="l17327"></a><span class="lineno">17327</span>&#160;    <span class="keywordflow">if</span> (n &gt;= 10000000)</div>
<div class="line"><a name="l17328"></a><span class="lineno">17328</span>&#160;    {</div>
<div class="line"><a name="l17329"></a><span class="lineno">17329</span>&#160;        pow10 = 10000000;</div>
<div class="line"><a name="l17330"></a><span class="lineno">17330</span>&#160;        <span class="keywordflow">return</span>  8;</div>
<div class="line"><a name="l17331"></a><span class="lineno">17331</span>&#160;    }</div>
<div class="line"><a name="l17332"></a><span class="lineno">17332</span>&#160;    <span class="keywordflow">if</span> (n &gt;= 1000000)</div>
<div class="line"><a name="l17333"></a><span class="lineno">17333</span>&#160;    {</div>
<div class="line"><a name="l17334"></a><span class="lineno">17334</span>&#160;        pow10 = 1000000;</div>
<div class="line"><a name="l17335"></a><span class="lineno">17335</span>&#160;        <span class="keywordflow">return</span>  7;</div>
<div class="line"><a name="l17336"></a><span class="lineno">17336</span>&#160;    }</div>
<div class="line"><a name="l17337"></a><span class="lineno">17337</span>&#160;    <span class="keywordflow">if</span> (n &gt;= 100000)</div>
<div class="line"><a name="l17338"></a><span class="lineno">17338</span>&#160;    {</div>
<div class="line"><a name="l17339"></a><span class="lineno">17339</span>&#160;        pow10 = 100000;</div>
<div class="line"><a name="l17340"></a><span class="lineno">17340</span>&#160;        <span class="keywordflow">return</span>  6;</div>
<div class="line"><a name="l17341"></a><span class="lineno">17341</span>&#160;    }</div>
<div class="line"><a name="l17342"></a><span class="lineno">17342</span>&#160;    <span class="keywordflow">if</span> (n &gt;= 10000)</div>
<div class="line"><a name="l17343"></a><span class="lineno">17343</span>&#160;    {</div>
<div class="line"><a name="l17344"></a><span class="lineno">17344</span>&#160;        pow10 = 10000;</div>
<div class="line"><a name="l17345"></a><span class="lineno">17345</span>&#160;        <span class="keywordflow">return</span>  5;</div>
<div class="line"><a name="l17346"></a><span class="lineno">17346</span>&#160;    }</div>
<div class="line"><a name="l17347"></a><span class="lineno">17347</span>&#160;    <span class="keywordflow">if</span> (n &gt;= 1000)</div>
<div class="line"><a name="l17348"></a><span class="lineno">17348</span>&#160;    {</div>
<div class="line"><a name="l17349"></a><span class="lineno">17349</span>&#160;        pow10 = 1000;</div>
<div class="line"><a name="l17350"></a><span class="lineno">17350</span>&#160;        <span class="keywordflow">return</span>  4;</div>
<div class="line"><a name="l17351"></a><span class="lineno">17351</span>&#160;    }</div>
<div class="line"><a name="l17352"></a><span class="lineno">17352</span>&#160;    <span class="keywordflow">if</span> (n &gt;= 100)</div>
<div class="line"><a name="l17353"></a><span class="lineno">17353</span>&#160;    {</div>
<div class="line"><a name="l17354"></a><span class="lineno">17354</span>&#160;        pow10 = 100;</div>
<div class="line"><a name="l17355"></a><span class="lineno">17355</span>&#160;        <span class="keywordflow">return</span>  3;</div>
<div class="line"><a name="l17356"></a><span class="lineno">17356</span>&#160;    }</div>
<div class="line"><a name="l17357"></a><span class="lineno">17357</span>&#160;    <span class="keywordflow">if</span> (n &gt;= 10)</div>
<div class="line"><a name="l17358"></a><span class="lineno">17358</span>&#160;    {</div>
<div class="line"><a name="l17359"></a><span class="lineno">17359</span>&#160;        pow10 = 10;</div>
<div class="line"><a name="l17360"></a><span class="lineno">17360</span>&#160;        <span class="keywordflow">return</span>  2;</div>
<div class="line"><a name="l17361"></a><span class="lineno">17361</span>&#160;    }</div>
<div class="line"><a name="l17362"></a><span class="lineno">17362</span>&#160; </div>
<div class="line"><a name="l17363"></a><span class="lineno">17363</span>&#160;    pow10 = 1;</div>
<div class="line"><a name="l17364"></a><span class="lineno">17364</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l17365"></a><span class="lineno">17365</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7175c9997b110bce4526e3b7357e7b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7175c9997b110bce4526e3b7357e7b03">&#9670;&nbsp;</a></span>format_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="json_8hpp.html#a5f2aaec3b681d0a72f7d6e90b70cdcd1">JSON_HEDLEY_RETURNS_NON_NULL</a> char* detail::dtoa_impl::format_buffer </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>decimal_exponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_exp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>prettify v = buf * 10^decimal_exponent </p>
<p>If v is in the range [10^min_exp, 10^max_exp) it will be printed in fixed-point notation. Otherwise it will be printed in exponential notation.</p>
<dl class="section pre"><dt>Precondition</dt><dd>min_exp &lt; 0 </dd>
<dd>
max_exp &gt; 0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17801">17801</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l17803"></a><span class="lineno">17803</span>&#160;{</div>
<div class="line"><a name="l17804"></a><span class="lineno">17804</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(min_exp &lt; 0);</div>
<div class="line"><a name="l17805"></a><span class="lineno">17805</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(max_exp &gt; 0);</div>
<div class="line"><a name="l17806"></a><span class="lineno">17806</span>&#160; </div>
<div class="line"><a name="l17807"></a><span class="lineno">17807</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> k = len;</div>
<div class="line"><a name="l17808"></a><span class="lineno">17808</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> n = len + decimal_exponent;</div>
<div class="line"><a name="l17809"></a><span class="lineno">17809</span>&#160; </div>
<div class="line"><a name="l17810"></a><span class="lineno">17810</span>&#160;    <span class="comment">// v = buf * 10^(n-k)</span></div>
<div class="line"><a name="l17811"></a><span class="lineno">17811</span>&#160;    <span class="comment">// k is the length of the buffer (number of decimal digits)</span></div>
<div class="line"><a name="l17812"></a><span class="lineno">17812</span>&#160;    <span class="comment">// n is the position of the decimal point relative to the start of the buffer.</span></div>
<div class="line"><a name="l17813"></a><span class="lineno">17813</span>&#160; </div>
<div class="line"><a name="l17814"></a><span class="lineno">17814</span>&#160;    <span class="keywordflow">if</span> (k &lt;= n &amp;&amp; n &lt;= max_exp)</div>
<div class="line"><a name="l17815"></a><span class="lineno">17815</span>&#160;    {</div>
<div class="line"><a name="l17816"></a><span class="lineno">17816</span>&#160;        <span class="comment">// digits[000]</span></div>
<div class="line"><a name="l17817"></a><span class="lineno">17817</span>&#160;        <span class="comment">// len &lt;= max_exp + 2</span></div>
<div class="line"><a name="l17818"></a><span class="lineno">17818</span>&#160; </div>
<div class="line"><a name="l17819"></a><span class="lineno">17819</span>&#160;        std::memset(buf + k, <span class="charliteral">&#39;0&#39;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(n) - <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(k));</div>
<div class="line"><a name="l17820"></a><span class="lineno">17820</span>&#160;        <span class="comment">// Make it look like a floating-point number (#362, #378)</span></div>
<div class="line"><a name="l17821"></a><span class="lineno">17821</span>&#160;        buf[n + 0] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l17822"></a><span class="lineno">17822</span>&#160;        buf[n + 1] = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l17823"></a><span class="lineno">17823</span>&#160;        <span class="keywordflow">return</span> buf + (<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(n) + 2);</div>
<div class="line"><a name="l17824"></a><span class="lineno">17824</span>&#160;    }</div>
<div class="line"><a name="l17825"></a><span class="lineno">17825</span>&#160; </div>
<div class="line"><a name="l17826"></a><span class="lineno">17826</span>&#160;    <span class="keywordflow">if</span> (0 &lt; n &amp;&amp; n &lt;= max_exp)</div>
<div class="line"><a name="l17827"></a><span class="lineno">17827</span>&#160;    {</div>
<div class="line"><a name="l17828"></a><span class="lineno">17828</span>&#160;        <span class="comment">// dig.its</span></div>
<div class="line"><a name="l17829"></a><span class="lineno">17829</span>&#160;        <span class="comment">// len &lt;= max_digits10 + 1</span></div>
<div class="line"><a name="l17830"></a><span class="lineno">17830</span>&#160; </div>
<div class="line"><a name="l17831"></a><span class="lineno">17831</span>&#160;        <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(k &gt; n);</div>
<div class="line"><a name="l17832"></a><span class="lineno">17832</span>&#160; </div>
<div class="line"><a name="l17833"></a><span class="lineno">17833</span>&#160;        std::memmove(buf + (<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(n) + 1), buf + n, <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(k) - <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(n));</div>
<div class="line"><a name="l17834"></a><span class="lineno">17834</span>&#160;        buf[n] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l17835"></a><span class="lineno">17835</span>&#160;        <span class="keywordflow">return</span> buf + (<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(k) + 1U);</div>
<div class="line"><a name="l17836"></a><span class="lineno">17836</span>&#160;    }</div>
<div class="line"><a name="l17837"></a><span class="lineno">17837</span>&#160; </div>
<div class="line"><a name="l17838"></a><span class="lineno">17838</span>&#160;    <span class="keywordflow">if</span> (min_exp &lt; n &amp;&amp; n &lt;= 0)</div>
<div class="line"><a name="l17839"></a><span class="lineno">17839</span>&#160;    {</div>
<div class="line"><a name="l17840"></a><span class="lineno">17840</span>&#160;        <span class="comment">// 0.[000]digits</span></div>
<div class="line"><a name="l17841"></a><span class="lineno">17841</span>&#160;        <span class="comment">// len &lt;= 2 + (-min_exp - 1) + max_digits10</span></div>
<div class="line"><a name="l17842"></a><span class="lineno">17842</span>&#160; </div>
<div class="line"><a name="l17843"></a><span class="lineno">17843</span>&#160;        std::memmove(buf + (2 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(-n)), buf, <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(k));</div>
<div class="line"><a name="l17844"></a><span class="lineno">17844</span>&#160;        buf[0] = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l17845"></a><span class="lineno">17845</span>&#160;        buf[1] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l17846"></a><span class="lineno">17846</span>&#160;        std::memset(buf + 2, <span class="charliteral">&#39;0&#39;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(-n));</div>
<div class="line"><a name="l17847"></a><span class="lineno">17847</span>&#160;        <span class="keywordflow">return</span> buf + (2U + <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(-n) + <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(k));</div>
<div class="line"><a name="l17848"></a><span class="lineno">17848</span>&#160;    }</div>
<div class="line"><a name="l17849"></a><span class="lineno">17849</span>&#160; </div>
<div class="line"><a name="l17850"></a><span class="lineno">17850</span>&#160;    <span class="keywordflow">if</span> (k == 1)</div>
<div class="line"><a name="l17851"></a><span class="lineno">17851</span>&#160;    {</div>
<div class="line"><a name="l17852"></a><span class="lineno">17852</span>&#160;        <span class="comment">// dE+123</span></div>
<div class="line"><a name="l17853"></a><span class="lineno">17853</span>&#160;        <span class="comment">// len &lt;= 1 + 5</span></div>
<div class="line"><a name="l17854"></a><span class="lineno">17854</span>&#160; </div>
<div class="line"><a name="l17855"></a><span class="lineno">17855</span>&#160;        buf += 1;</div>
<div class="line"><a name="l17856"></a><span class="lineno">17856</span>&#160;    }</div>
<div class="line"><a name="l17857"></a><span class="lineno">17857</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l17858"></a><span class="lineno">17858</span>&#160;    {</div>
<div class="line"><a name="l17859"></a><span class="lineno">17859</span>&#160;        <span class="comment">// d.igitsE+123</span></div>
<div class="line"><a name="l17860"></a><span class="lineno">17860</span>&#160;        <span class="comment">// len &lt;= max_digits10 + 1 + 5</span></div>
<div class="line"><a name="l17861"></a><span class="lineno">17861</span>&#160; </div>
<div class="line"><a name="l17862"></a><span class="lineno">17862</span>&#160;        std::memmove(buf + 2, buf + 1, <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(k) - 1);</div>
<div class="line"><a name="l17863"></a><span class="lineno">17863</span>&#160;        buf[1] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l17864"></a><span class="lineno">17864</span>&#160;        buf += 1 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(k);</div>
<div class="line"><a name="l17865"></a><span class="lineno">17865</span>&#160;    }</div>
<div class="line"><a name="l17866"></a><span class="lineno">17866</span>&#160; </div>
<div class="line"><a name="l17867"></a><span class="lineno">17867</span>&#160;    *buf++ = <span class="charliteral">&#39;e&#39;</span>;</div>
<div class="line"><a name="l17868"></a><span class="lineno">17868</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedetail_1_1dtoa__impl.html#a6efd46b9558b99b68c674ad02b395d25">append_exponent</a>(buf, n - 1);</div>
<div class="line"><a name="l17869"></a><span class="lineno">17869</span>&#160;}</div>
<div class="ttc" id="anamespacedetail_1_1dtoa__impl_html_a6efd46b9558b99b68c674ad02b395d25"><div class="ttname"><a href="namespacedetail_1_1dtoa__impl.html#a6efd46b9558b99b68c674ad02b395d25">detail::dtoa_impl::append_exponent</a></div><div class="ttdeci">JSON_HEDLEY_RETURNS_NON_NULL char * append_exponent(char *buf, int e)</div><div class="ttdoc">appends a decimal representation of e to buf</div><div class="ttdef"><b>Definition:</b> <a href="json_8hpp_source.html#l17749">json.hpp:17749</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a29ae6574f6be09a5c8ab08da9a3f71b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29ae6574f6be09a5c8ab08da9a3f71b4">&#9670;&nbsp;</a></span>get_cached_power_for_binary_exponent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdetail_1_1dtoa__impl_1_1cached__power.html">cached_power</a> detail::dtoa_impl::get_cached_power_for_binary_exponent </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For a normalized diyfp w = f * 2^e, this function returns a (normalized) cached power-of-ten c = f_c * 2^e_c, such that the exponent of the product w * c satisfies (Definition 3.2 from [1]) </p><pre class="fragment"> alpha &lt;= e_c + e + q &lt;= gamma.
</pre> 
<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17149">17149</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l17150"></a><span class="lineno">17150</span>&#160;{</div>
<div class="line"><a name="l17151"></a><span class="lineno">17151</span>&#160;    <span class="comment">// Now</span></div>
<div class="line"><a name="l17152"></a><span class="lineno">17152</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17153"></a><span class="lineno">17153</span>&#160;    <span class="comment">//      alpha &lt;= e_c + e + q &lt;= gamma                                    (1)</span></div>
<div class="line"><a name="l17154"></a><span class="lineno">17154</span>&#160;    <span class="comment">//      ==&gt; f_c * 2^alpha &lt;= c * 2^e * 2^q</span></div>
<div class="line"><a name="l17155"></a><span class="lineno">17155</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17156"></a><span class="lineno">17156</span>&#160;    <span class="comment">// and since the c&#39;s are normalized, 2^(q-1) &lt;= f_c,</span></div>
<div class="line"><a name="l17157"></a><span class="lineno">17157</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17158"></a><span class="lineno">17158</span>&#160;    <span class="comment">//      ==&gt; 2^(q - 1 + alpha) &lt;= c * 2^(e + q)</span></div>
<div class="line"><a name="l17159"></a><span class="lineno">17159</span>&#160;    <span class="comment">//      ==&gt; 2^(alpha - e - 1) &lt;= c</span></div>
<div class="line"><a name="l17160"></a><span class="lineno">17160</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17161"></a><span class="lineno">17161</span>&#160;    <span class="comment">// If c were an exact power of ten, i.e. c = 10^k, one may determine k as</span></div>
<div class="line"><a name="l17162"></a><span class="lineno">17162</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17163"></a><span class="lineno">17163</span>&#160;    <span class="comment">//      k = ceil( log_10( 2^(alpha - e - 1) ) )</span></div>
<div class="line"><a name="l17164"></a><span class="lineno">17164</span>&#160;    <span class="comment">//        = ceil( (alpha - e - 1) * log_10(2) )</span></div>
<div class="line"><a name="l17165"></a><span class="lineno">17165</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17166"></a><span class="lineno">17166</span>&#160;    <span class="comment">// From the paper:</span></div>
<div class="line"><a name="l17167"></a><span class="lineno">17167</span>&#160;    <span class="comment">// &quot;In theory the result of the procedure could be wrong since c is rounded,</span></div>
<div class="line"><a name="l17168"></a><span class="lineno">17168</span>&#160;    <span class="comment">//  and the computation itself is approximated [...]. In practice, however,</span></div>
<div class="line"><a name="l17169"></a><span class="lineno">17169</span>&#160;    <span class="comment">//  this simple function is sufficient.&quot;</span></div>
<div class="line"><a name="l17170"></a><span class="lineno">17170</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17171"></a><span class="lineno">17171</span>&#160;    <span class="comment">// For IEEE double precision floating-point numbers converted into</span></div>
<div class="line"><a name="l17172"></a><span class="lineno">17172</span>&#160;    <span class="comment">// normalized diyfp&#39;s w = f * 2^e, with q = 64,</span></div>
<div class="line"><a name="l17173"></a><span class="lineno">17173</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17174"></a><span class="lineno">17174</span>&#160;    <span class="comment">//      e &gt;= -1022      (min IEEE exponent)</span></div>
<div class="line"><a name="l17175"></a><span class="lineno">17175</span>&#160;    <span class="comment">//           -52        (p - 1)</span></div>
<div class="line"><a name="l17176"></a><span class="lineno">17176</span>&#160;    <span class="comment">//           -52        (p - 1, possibly normalize denormal IEEE numbers)</span></div>
<div class="line"><a name="l17177"></a><span class="lineno">17177</span>&#160;    <span class="comment">//           -11        (normalize the diyfp)</span></div>
<div class="line"><a name="l17178"></a><span class="lineno">17178</span>&#160;    <span class="comment">//         = -1137</span></div>
<div class="line"><a name="l17179"></a><span class="lineno">17179</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17180"></a><span class="lineno">17180</span>&#160;    <span class="comment">// and</span></div>
<div class="line"><a name="l17181"></a><span class="lineno">17181</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17182"></a><span class="lineno">17182</span>&#160;    <span class="comment">//      e &lt;= +1023      (max IEEE exponent)</span></div>
<div class="line"><a name="l17183"></a><span class="lineno">17183</span>&#160;    <span class="comment">//           -52        (p - 1)</span></div>
<div class="line"><a name="l17184"></a><span class="lineno">17184</span>&#160;    <span class="comment">//           -11        (normalize the diyfp)</span></div>
<div class="line"><a name="l17185"></a><span class="lineno">17185</span>&#160;    <span class="comment">//         = 960</span></div>
<div class="line"><a name="l17186"></a><span class="lineno">17186</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17187"></a><span class="lineno">17187</span>&#160;    <span class="comment">// This binary exponent range [-1137,960] results in a decimal exponent</span></div>
<div class="line"><a name="l17188"></a><span class="lineno">17188</span>&#160;    <span class="comment">// range [-307,324]. One does not need to store a cached power for each</span></div>
<div class="line"><a name="l17189"></a><span class="lineno">17189</span>&#160;    <span class="comment">// k in this range. For each such k it suffices to find a cached power</span></div>
<div class="line"><a name="l17190"></a><span class="lineno">17190</span>&#160;    <span class="comment">// such that the exponent of the product lies in [alpha,gamma].</span></div>
<div class="line"><a name="l17191"></a><span class="lineno">17191</span>&#160;    <span class="comment">// This implies that the difference of the decimal exponents of adjacent</span></div>
<div class="line"><a name="l17192"></a><span class="lineno">17192</span>&#160;    <span class="comment">// table entries must be less than or equal to</span></div>
<div class="line"><a name="l17193"></a><span class="lineno">17193</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17194"></a><span class="lineno">17194</span>&#160;    <span class="comment">//      floor( (gamma - alpha) * log_10(2) ) = 8.</span></div>
<div class="line"><a name="l17195"></a><span class="lineno">17195</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17196"></a><span class="lineno">17196</span>&#160;    <span class="comment">// (A smaller distance gamma-alpha would require a larger table.)</span></div>
<div class="line"><a name="l17197"></a><span class="lineno">17197</span>&#160; </div>
<div class="line"><a name="l17198"></a><span class="lineno">17198</span>&#160;    <span class="comment">// NB:</span></div>
<div class="line"><a name="l17199"></a><span class="lineno">17199</span>&#160;    <span class="comment">// Actually this function returns c, such that -60 &lt;= e_c + e + 64 &lt;= -34.</span></div>
<div class="line"><a name="l17200"></a><span class="lineno">17200</span>&#160; </div>
<div class="line"><a name="l17201"></a><span class="lineno">17201</span>&#160;    constexpr <span class="keywordtype">int</span> kCachedPowersMinDecExp = -300;</div>
<div class="line"><a name="l17202"></a><span class="lineno">17202</span>&#160;    constexpr <span class="keywordtype">int</span> kCachedPowersDecStep = 8;</div>
<div class="line"><a name="l17203"></a><span class="lineno">17203</span>&#160; </div>
<div class="line"><a name="l17204"></a><span class="lineno">17204</span>&#160;    <span class="keyword">static</span> constexpr std::array&lt;cached_power, 79&gt; kCachedPowers =</div>
<div class="line"><a name="l17205"></a><span class="lineno">17205</span>&#160;    {</div>
<div class="line"><a name="l17206"></a><span class="lineno">17206</span>&#160;        {</div>
<div class="line"><a name="l17207"></a><span class="lineno">17207</span>&#160;            { 0xAB70FE17C79AC6CA, -1060, -300 },</div>
<div class="line"><a name="l17208"></a><span class="lineno">17208</span>&#160;            { 0xFF77B1FCBEBCDC4F, -1034, -292 },</div>
<div class="line"><a name="l17209"></a><span class="lineno">17209</span>&#160;            { 0xBE5691EF416BD60C, -1007, -284 },</div>
<div class="line"><a name="l17210"></a><span class="lineno">17210</span>&#160;            { 0x8DD01FAD907FFC3C,  -980, -276 },</div>
<div class="line"><a name="l17211"></a><span class="lineno">17211</span>&#160;            { 0xD3515C2831559A83,  -954, -268 },</div>
<div class="line"><a name="l17212"></a><span class="lineno">17212</span>&#160;            { 0x9D71AC8FADA6C9B5,  -927, -260 },</div>
<div class="line"><a name="l17213"></a><span class="lineno">17213</span>&#160;            { 0xEA9C227723EE8BCB,  -901, -252 },</div>
<div class="line"><a name="l17214"></a><span class="lineno">17214</span>&#160;            { 0xAECC49914078536D,  -874, -244 },</div>
<div class="line"><a name="l17215"></a><span class="lineno">17215</span>&#160;            { 0x823C12795DB6CE57,  -847, -236 },</div>
<div class="line"><a name="l17216"></a><span class="lineno">17216</span>&#160;            { 0xC21094364DFB5637,  -821, -228 },</div>
<div class="line"><a name="l17217"></a><span class="lineno">17217</span>&#160;            { 0x9096EA6F3848984F,  -794, -220 },</div>
<div class="line"><a name="l17218"></a><span class="lineno">17218</span>&#160;            { 0xD77485CB25823AC7,  -768, -212 },</div>
<div class="line"><a name="l17219"></a><span class="lineno">17219</span>&#160;            { 0xA086CFCD97BF97F4,  -741, -204 },</div>
<div class="line"><a name="l17220"></a><span class="lineno">17220</span>&#160;            { 0xEF340A98172AACE5,  -715, -196 },</div>
<div class="line"><a name="l17221"></a><span class="lineno">17221</span>&#160;            { 0xB23867FB2A35B28E,  -688, -188 },</div>
<div class="line"><a name="l17222"></a><span class="lineno">17222</span>&#160;            { 0x84C8D4DFD2C63F3B,  -661, -180 },</div>
<div class="line"><a name="l17223"></a><span class="lineno">17223</span>&#160;            { 0xC5DD44271AD3CDBA,  -635, -172 },</div>
<div class="line"><a name="l17224"></a><span class="lineno">17224</span>&#160;            { 0x936B9FCEBB25C996,  -608, -164 },</div>
<div class="line"><a name="l17225"></a><span class="lineno">17225</span>&#160;            { 0xDBAC6C247D62A584,  -582, -156 },</div>
<div class="line"><a name="l17226"></a><span class="lineno">17226</span>&#160;            { 0xA3AB66580D5FDAF6,  -555, -148 },</div>
<div class="line"><a name="l17227"></a><span class="lineno">17227</span>&#160;            { 0xF3E2F893DEC3F126,  -529, -140 },</div>
<div class="line"><a name="l17228"></a><span class="lineno">17228</span>&#160;            { 0xB5B5ADA8AAFF80B8,  -502, -132 },</div>
<div class="line"><a name="l17229"></a><span class="lineno">17229</span>&#160;            { 0x87625F056C7C4A8B,  -475, -124 },</div>
<div class="line"><a name="l17230"></a><span class="lineno">17230</span>&#160;            { 0xC9BCFF6034C13053,  -449, -116 },</div>
<div class="line"><a name="l17231"></a><span class="lineno">17231</span>&#160;            { 0x964E858C91BA2655,  -422, -108 },</div>
<div class="line"><a name="l17232"></a><span class="lineno">17232</span>&#160;            { 0xDFF9772470297EBD,  -396, -100 },</div>
<div class="line"><a name="l17233"></a><span class="lineno">17233</span>&#160;            { 0xA6DFBD9FB8E5B88F,  -369,  -92 },</div>
<div class="line"><a name="l17234"></a><span class="lineno">17234</span>&#160;            { 0xF8A95FCF88747D94,  -343,  -84 },</div>
<div class="line"><a name="l17235"></a><span class="lineno">17235</span>&#160;            { 0xB94470938FA89BCF,  -316,  -76 },</div>
<div class="line"><a name="l17236"></a><span class="lineno">17236</span>&#160;            { 0x8A08F0F8BF0F156B,  -289,  -68 },</div>
<div class="line"><a name="l17237"></a><span class="lineno">17237</span>&#160;            { 0xCDB02555653131B6,  -263,  -60 },</div>
<div class="line"><a name="l17238"></a><span class="lineno">17238</span>&#160;            { 0x993FE2C6D07B7FAC,  -236,  -52 },</div>
<div class="line"><a name="l17239"></a><span class="lineno">17239</span>&#160;            { 0xE45C10C42A2B3B06,  -210,  -44 },</div>
<div class="line"><a name="l17240"></a><span class="lineno">17240</span>&#160;            { 0xAA242499697392D3,  -183,  -36 },</div>
<div class="line"><a name="l17241"></a><span class="lineno">17241</span>&#160;            { 0xFD87B5F28300CA0E,  -157,  -28 },</div>
<div class="line"><a name="l17242"></a><span class="lineno">17242</span>&#160;            { 0xBCE5086492111AEB,  -130,  -20 },</div>
<div class="line"><a name="l17243"></a><span class="lineno">17243</span>&#160;            { 0x8CBCCC096F5088CC,  -103,  -12 },</div>
<div class="line"><a name="l17244"></a><span class="lineno">17244</span>&#160;            { 0xD1B71758E219652C,   -77,   -4 },</div>
<div class="line"><a name="l17245"></a><span class="lineno">17245</span>&#160;            { 0x9C40000000000000,   -50,    4 },</div>
<div class="line"><a name="l17246"></a><span class="lineno">17246</span>&#160;            { 0xE8D4A51000000000,   -24,   12 },</div>
<div class="line"><a name="l17247"></a><span class="lineno">17247</span>&#160;            { 0xAD78EBC5AC620000,     3,   20 },</div>
<div class="line"><a name="l17248"></a><span class="lineno">17248</span>&#160;            { 0x813F3978F8940984,    30,   28 },</div>
<div class="line"><a name="l17249"></a><span class="lineno">17249</span>&#160;            { 0xC097CE7BC90715B3,    56,   36 },</div>
<div class="line"><a name="l17250"></a><span class="lineno">17250</span>&#160;            { 0x8F7E32CE7BEA5C70,    83,   44 },</div>
<div class="line"><a name="l17251"></a><span class="lineno">17251</span>&#160;            { 0xD5D238A4ABE98068,   109,   52 },</div>
<div class="line"><a name="l17252"></a><span class="lineno">17252</span>&#160;            { 0x9F4F2726179A2245,   136,   60 },</div>
<div class="line"><a name="l17253"></a><span class="lineno">17253</span>&#160;            { 0xED63A231D4C4FB27,   162,   68 },</div>
<div class="line"><a name="l17254"></a><span class="lineno">17254</span>&#160;            { 0xB0DE65388CC8ADA8,   189,   76 },</div>
<div class="line"><a name="l17255"></a><span class="lineno">17255</span>&#160;            { 0x83C7088E1AAB65DB,   216,   84 },</div>
<div class="line"><a name="l17256"></a><span class="lineno">17256</span>&#160;            { 0xC45D1DF942711D9A,   242,   92 },</div>
<div class="line"><a name="l17257"></a><span class="lineno">17257</span>&#160;            { 0x924D692CA61BE758,   269,  100 },</div>
<div class="line"><a name="l17258"></a><span class="lineno">17258</span>&#160;            { 0xDA01EE641A708DEA,   295,  108 },</div>
<div class="line"><a name="l17259"></a><span class="lineno">17259</span>&#160;            { 0xA26DA3999AEF774A,   322,  116 },</div>
<div class="line"><a name="l17260"></a><span class="lineno">17260</span>&#160;            { 0xF209787BB47D6B85,   348,  124 },</div>
<div class="line"><a name="l17261"></a><span class="lineno">17261</span>&#160;            { 0xB454E4A179DD1877,   375,  132 },</div>
<div class="line"><a name="l17262"></a><span class="lineno">17262</span>&#160;            { 0x865B86925B9BC5C2,   402,  140 },</div>
<div class="line"><a name="l17263"></a><span class="lineno">17263</span>&#160;            { 0xC83553C5C8965D3D,   428,  148 },</div>
<div class="line"><a name="l17264"></a><span class="lineno">17264</span>&#160;            { 0x952AB45CFA97A0B3,   455,  156 },</div>
<div class="line"><a name="l17265"></a><span class="lineno">17265</span>&#160;            { 0xDE469FBD99A05FE3,   481,  164 },</div>
<div class="line"><a name="l17266"></a><span class="lineno">17266</span>&#160;            { 0xA59BC234DB398C25,   508,  172 },</div>
<div class="line"><a name="l17267"></a><span class="lineno">17267</span>&#160;            { 0xF6C69A72A3989F5C,   534,  180 },</div>
<div class="line"><a name="l17268"></a><span class="lineno">17268</span>&#160;            { 0xB7DCBF5354E9BECE,   561,  188 },</div>
<div class="line"><a name="l17269"></a><span class="lineno">17269</span>&#160;            { 0x88FCF317F22241E2,   588,  196 },</div>
<div class="line"><a name="l17270"></a><span class="lineno">17270</span>&#160;            { 0xCC20CE9BD35C78A5,   614,  204 },</div>
<div class="line"><a name="l17271"></a><span class="lineno">17271</span>&#160;            { 0x98165AF37B2153DF,   641,  212 },</div>
<div class="line"><a name="l17272"></a><span class="lineno">17272</span>&#160;            { 0xE2A0B5DC971F303A,   667,  220 },</div>
<div class="line"><a name="l17273"></a><span class="lineno">17273</span>&#160;            { 0xA8D9D1535CE3B396,   694,  228 },</div>
<div class="line"><a name="l17274"></a><span class="lineno">17274</span>&#160;            { 0xFB9B7CD9A4A7443C,   720,  236 },</div>
<div class="line"><a name="l17275"></a><span class="lineno">17275</span>&#160;            { 0xBB764C4CA7A44410,   747,  244 },</div>
<div class="line"><a name="l17276"></a><span class="lineno">17276</span>&#160;            { 0x8BAB8EEFB6409C1A,   774,  252 },</div>
<div class="line"><a name="l17277"></a><span class="lineno">17277</span>&#160;            { 0xD01FEF10A657842C,   800,  260 },</div>
<div class="line"><a name="l17278"></a><span class="lineno">17278</span>&#160;            { 0x9B10A4E5E9913129,   827,  268 },</div>
<div class="line"><a name="l17279"></a><span class="lineno">17279</span>&#160;            { 0xE7109BFBA19C0C9D,   853,  276 },</div>
<div class="line"><a name="l17280"></a><span class="lineno">17280</span>&#160;            { 0xAC2820D9623BF429,   880,  284 },</div>
<div class="line"><a name="l17281"></a><span class="lineno">17281</span>&#160;            { 0x80444B5E7AA7CF85,   907,  292 },</div>
<div class="line"><a name="l17282"></a><span class="lineno">17282</span>&#160;            { 0xBF21E44003ACDD2D,   933,  300 },</div>
<div class="line"><a name="l17283"></a><span class="lineno">17283</span>&#160;            { 0x8E679C2F5E44FF8F,   960,  308 },</div>
<div class="line"><a name="l17284"></a><span class="lineno">17284</span>&#160;            { 0xD433179D9C8CB841,   986,  316 },</div>
<div class="line"><a name="l17285"></a><span class="lineno">17285</span>&#160;            { 0x9E19DB92B4E31BA9,  1013,  324 },</div>
<div class="line"><a name="l17286"></a><span class="lineno">17286</span>&#160;        }</div>
<div class="line"><a name="l17287"></a><span class="lineno">17287</span>&#160;    };</div>
<div class="line"><a name="l17288"></a><span class="lineno">17288</span>&#160; </div>
<div class="line"><a name="l17289"></a><span class="lineno">17289</span>&#160;    <span class="comment">// This computation gives exactly the same results for k as</span></div>
<div class="line"><a name="l17290"></a><span class="lineno">17290</span>&#160;    <span class="comment">//      k = ceil((kAlpha - e - 1) * 0.30102999566398114)</span></div>
<div class="line"><a name="l17291"></a><span class="lineno">17291</span>&#160;    <span class="comment">// for |e| &lt;= 1500, but doesn&#39;t require floating-point operations.</span></div>
<div class="line"><a name="l17292"></a><span class="lineno">17292</span>&#160;    <span class="comment">// NB: log_10(2) ~= 78913 / 2^18</span></div>
<div class="line"><a name="l17293"></a><span class="lineno">17293</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(e &gt;= -1500);</div>
<div class="line"><a name="l17294"></a><span class="lineno">17294</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(e &lt;=  1500);</div>
<div class="line"><a name="l17295"></a><span class="lineno">17295</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> f = <a class="code" href="namespacedetail_1_1dtoa__impl.html#a95c569b7627a9372686f1f77d73e8660">kAlpha</a> - e - 1;</div>
<div class="line"><a name="l17296"></a><span class="lineno">17296</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> k = (f * 78913) / (1 &lt;&lt; 18) + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(f &gt; 0);</div>
<div class="line"><a name="l17297"></a><span class="lineno">17297</span>&#160; </div>
<div class="line"><a name="l17298"></a><span class="lineno">17298</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> index = (-kCachedPowersMinDecExp + k + (kCachedPowersDecStep - 1)) / kCachedPowersDecStep;</div>
<div class="line"><a name="l17299"></a><span class="lineno">17299</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(index &gt;= 0);</div>
<div class="line"><a name="l17300"></a><span class="lineno">17300</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(<span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(index) &lt; kCachedPowers.size());</div>
<div class="line"><a name="l17301"></a><span class="lineno">17301</span>&#160; </div>
<div class="line"><a name="l17302"></a><span class="lineno">17302</span>&#160;    <span class="keyword">const</span> cached_power cached = kCachedPowers[<span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(index)];</div>
<div class="line"><a name="l17303"></a><span class="lineno">17303</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(<a class="code" href="namespacedetail_1_1dtoa__impl.html#a95c569b7627a9372686f1f77d73e8660">kAlpha</a> &lt;= cached.e + e + 64);</div>
<div class="line"><a name="l17304"></a><span class="lineno">17304</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(<a class="code" href="namespacedetail_1_1dtoa__impl.html#ae152a095d2dd1a6dd41ef8ad39c26e19">kGamma</a> &gt;= cached.e + e + 64);</div>
<div class="line"><a name="l17305"></a><span class="lineno">17305</span>&#160; </div>
<div class="line"><a name="l17306"></a><span class="lineno">17306</span>&#160;    <span class="keywordflow">return</span> cached;</div>
<div class="line"><a name="l17307"></a><span class="lineno">17307</span>&#160;}</div>
<div class="ttc" id="anamespacedetail_1_1dtoa__impl_html_a95c569b7627a9372686f1f77d73e8660"><div class="ttname"><a href="namespacedetail_1_1dtoa__impl.html#a95c569b7627a9372686f1f77d73e8660">detail::dtoa_impl::kAlpha</a></div><div class="ttdeci">constexpr int kAlpha</div><div class="ttdef"><b>Definition:</b> <a href="json_8hpp_source.html#l17132">json.hpp:17132</a></div></div>
<div class="ttc" id="anamespacedetail_1_1dtoa__impl_html_ae152a095d2dd1a6dd41ef8ad39c26e19"><div class="ttname"><a href="namespacedetail_1_1dtoa__impl.html#ae152a095d2dd1a6dd41ef8ad39c26e19">detail::dtoa_impl::kGamma</a></div><div class="ttdeci">constexpr int kGamma</div><div class="ttdef"><b>Definition:</b> <a href="json_8hpp_source.html#l17133">json.hpp:17133</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad549352ed1a9676a092d143a2daa3dee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad549352ed1a9676a092d143a2daa3dee">&#9670;&nbsp;</a></span>grisu2() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void detail::dtoa_impl::grisu2 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>decimal_exponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>m_minus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>m_plus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>v = buf * 10^decimal_exponent len is the length of the buffer (number of decimal digits) The buffer must be large enough, i.e. &gt;= max_digits10. </p>

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17649">17649</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l17651"></a><span class="lineno">17651</span>&#160;{</div>
<div class="line"><a name="l17652"></a><span class="lineno">17652</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(m_plus.e == m_minus.e);</div>
<div class="line"><a name="l17653"></a><span class="lineno">17653</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(m_plus.e == v.e);</div>
<div class="line"><a name="l17654"></a><span class="lineno">17654</span>&#160; </div>
<div class="line"><a name="l17655"></a><span class="lineno">17655</span>&#160;    <span class="comment">//  --------(-----------------------+-----------------------)--------    (A)</span></div>
<div class="line"><a name="l17656"></a><span class="lineno">17656</span>&#160;    <span class="comment">//          m-                      v                       m+</span></div>
<div class="line"><a name="l17657"></a><span class="lineno">17657</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17658"></a><span class="lineno">17658</span>&#160;    <span class="comment">//  --------------------(-----------+-----------------------)--------    (B)</span></div>
<div class="line"><a name="l17659"></a><span class="lineno">17659</span>&#160;    <span class="comment">//                      m-          v                       m+</span></div>
<div class="line"><a name="l17660"></a><span class="lineno">17660</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17661"></a><span class="lineno">17661</span>&#160;    <span class="comment">// First scale v (and m- and m+) such that the exponent is in the range</span></div>
<div class="line"><a name="l17662"></a><span class="lineno">17662</span>&#160;    <span class="comment">// [alpha, gamma].</span></div>
<div class="line"><a name="l17663"></a><span class="lineno">17663</span>&#160; </div>
<div class="line"><a name="l17664"></a><span class="lineno">17664</span>&#160;    <span class="keyword">const</span> cached_power cached = <a class="code" href="namespacedetail_1_1dtoa__impl.html#a29ae6574f6be09a5c8ab08da9a3f71b4">get_cached_power_for_binary_exponent</a>(m_plus.e);</div>
<div class="line"><a name="l17665"></a><span class="lineno">17665</span>&#160; </div>
<div class="line"><a name="l17666"></a><span class="lineno">17666</span>&#160;    <span class="keyword">const</span> diyfp c_minus_k(cached.f, cached.e); <span class="comment">// = c ~= 10^-k</span></div>
<div class="line"><a name="l17667"></a><span class="lineno">17667</span>&#160; </div>
<div class="line"><a name="l17668"></a><span class="lineno">17668</span>&#160;    <span class="comment">// The exponent of the products is = v.e + c_minus_k.e + q and is in the range [alpha,gamma]</span></div>
<div class="line"><a name="l17669"></a><span class="lineno">17669</span>&#160;    <span class="keyword">const</span> diyfp w       = diyfp::mul(v,       c_minus_k);</div>
<div class="line"><a name="l17670"></a><span class="lineno">17670</span>&#160;    <span class="keyword">const</span> diyfp w_minus = diyfp::mul(m_minus, c_minus_k);</div>
<div class="line"><a name="l17671"></a><span class="lineno">17671</span>&#160;    <span class="keyword">const</span> diyfp w_plus  = diyfp::mul(m_plus,  c_minus_k);</div>
<div class="line"><a name="l17672"></a><span class="lineno">17672</span>&#160; </div>
<div class="line"><a name="l17673"></a><span class="lineno">17673</span>&#160;    <span class="comment">//  ----(---+---)---------------(---+---)---------------(---+---)----</span></div>
<div class="line"><a name="l17674"></a><span class="lineno">17674</span>&#160;    <span class="comment">//          w-                      w                       w+</span></div>
<div class="line"><a name="l17675"></a><span class="lineno">17675</span>&#160;    <span class="comment">//          = c*m-                  = c*v                   = c*m+</span></div>
<div class="line"><a name="l17676"></a><span class="lineno">17676</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17677"></a><span class="lineno">17677</span>&#160;    <span class="comment">// diyfp::mul rounds its result and c_minus_k is approximated too. w, w- and</span></div>
<div class="line"><a name="l17678"></a><span class="lineno">17678</span>&#160;    <span class="comment">// w+ are now off by a small amount.</span></div>
<div class="line"><a name="l17679"></a><span class="lineno">17679</span>&#160;    <span class="comment">// In fact:</span></div>
<div class="line"><a name="l17680"></a><span class="lineno">17680</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17681"></a><span class="lineno">17681</span>&#160;    <span class="comment">//      w - v * 10^k &lt; 1 ulp</span></div>
<div class="line"><a name="l17682"></a><span class="lineno">17682</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17683"></a><span class="lineno">17683</span>&#160;    <span class="comment">// To account for this inaccuracy, add resp. subtract 1 ulp.</span></div>
<div class="line"><a name="l17684"></a><span class="lineno">17684</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17685"></a><span class="lineno">17685</span>&#160;    <span class="comment">//  --------+---[---------------(---+---)---------------]---+--------</span></div>
<div class="line"><a name="l17686"></a><span class="lineno">17686</span>&#160;    <span class="comment">//          w-  M-                  w                   M+  w+</span></div>
<div class="line"><a name="l17687"></a><span class="lineno">17687</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17688"></a><span class="lineno">17688</span>&#160;    <span class="comment">// Now any number in [M-, M+] (bounds included) will round to w when input,</span></div>
<div class="line"><a name="l17689"></a><span class="lineno">17689</span>&#160;    <span class="comment">// regardless of how the input rounding algorithm breaks ties.</span></div>
<div class="line"><a name="l17690"></a><span class="lineno">17690</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17691"></a><span class="lineno">17691</span>&#160;    <span class="comment">// And digit_gen generates the shortest possible such number in [M-, M+].</span></div>
<div class="line"><a name="l17692"></a><span class="lineno">17692</span>&#160;    <span class="comment">// Note that this does not mean that Grisu2 always generates the shortest</span></div>
<div class="line"><a name="l17693"></a><span class="lineno">17693</span>&#160;    <span class="comment">// possible number in the interval (m-, m+).</span></div>
<div class="line"><a name="l17694"></a><span class="lineno">17694</span>&#160;    <span class="keyword">const</span> diyfp M_minus(w_minus.f + 1, w_minus.e);</div>
<div class="line"><a name="l17695"></a><span class="lineno">17695</span>&#160;    <span class="keyword">const</span> diyfp M_plus (w_plus.f  - 1, w_plus.e );</div>
<div class="line"><a name="l17696"></a><span class="lineno">17696</span>&#160; </div>
<div class="line"><a name="l17697"></a><span class="lineno">17697</span>&#160;    decimal_exponent = -cached.k; <span class="comment">// = -(-k) = k</span></div>
<div class="line"><a name="l17698"></a><span class="lineno">17698</span>&#160; </div>
<div class="line"><a name="l17699"></a><span class="lineno">17699</span>&#160;    <a class="code" href="namespacedetail_1_1dtoa__impl.html#ae877aa13ab872c99a1c614e5e1524807">grisu2_digit_gen</a>(buf, len, decimal_exponent, M_minus, w, M_plus);</div>
<div class="line"><a name="l17700"></a><span class="lineno">17700</span>&#160;}</div>
<div class="ttc" id="anamespacedetail_1_1dtoa__impl_html_a29ae6574f6be09a5c8ab08da9a3f71b4"><div class="ttname"><a href="namespacedetail_1_1dtoa__impl.html#a29ae6574f6be09a5c8ab08da9a3f71b4">detail::dtoa_impl::get_cached_power_for_binary_exponent</a></div><div class="ttdeci">cached_power get_cached_power_for_binary_exponent(int e)</div><div class="ttdef"><b>Definition:</b> <a href="json_8hpp_source.html#l17149">json.hpp:17149</a></div></div>
<div class="ttc" id="anamespacedetail_1_1dtoa__impl_html_ae877aa13ab872c99a1c614e5e1524807"><div class="ttname"><a href="namespacedetail_1_1dtoa__impl.html#ae877aa13ab872c99a1c614e5e1524807">detail::dtoa_impl::grisu2_digit_gen</a></div><div class="ttdeci">void grisu2_digit_gen(char *buffer, int &amp;length, int &amp;decimal_exponent, diyfp M_minus, diyfp w, diyfp M_plus)</div><div class="ttdef"><b>Definition:</b> <a href="json_8hpp_source.html#l17408">json.hpp:17408</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abdf6bc05c54068a5930f66c2e803e8b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdf6bc05c54068a5930f66c2e803e8b8">&#9670;&nbsp;</a></span>grisu2() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename FloatType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void detail::dtoa_impl::grisu2 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>decimal_exponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FloatType&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>v = buf * 10^decimal_exponent len is the length of the buffer (number of decimal digits) The buffer must be large enough, i.e. &gt;= max_digits10. </p>

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17709">17709</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l17710"></a><span class="lineno">17710</span>&#160;{</div>
<div class="line"><a name="l17711"></a><span class="lineno">17711</span>&#160;    static_assert(diyfp::kPrecision &gt;= std::numeric_limits&lt;FloatType&gt;::digits + 3,</div>
<div class="line"><a name="l17712"></a><span class="lineno">17712</span>&#160;                  <span class="stringliteral">&quot;internal error: not enough precision&quot;</span>);</div>
<div class="line"><a name="l17713"></a><span class="lineno">17713</span>&#160; </div>
<div class="line"><a name="l17714"></a><span class="lineno">17714</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(std::isfinite(value));</div>
<div class="line"><a name="l17715"></a><span class="lineno">17715</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(value &gt; 0);</div>
<div class="line"><a name="l17716"></a><span class="lineno">17716</span>&#160; </div>
<div class="line"><a name="l17717"></a><span class="lineno">17717</span>&#160;    <span class="comment">// If the neighbors (and boundaries) of &#39;value&#39; are always computed for double-precision</span></div>
<div class="line"><a name="l17718"></a><span class="lineno">17718</span>&#160;    <span class="comment">// numbers, all float&#39;s can be recovered using strtod (and strtof). However, the resulting</span></div>
<div class="line"><a name="l17719"></a><span class="lineno">17719</span>&#160;    <span class="comment">// decimal representations are not exactly &quot;short&quot;.</span></div>
<div class="line"><a name="l17720"></a><span class="lineno">17720</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17721"></a><span class="lineno">17721</span>&#160;    <span class="comment">// The documentation for &#39;std::to_chars&#39; (https://en.cppreference.com/w/cpp/utility/to_chars)</span></div>
<div class="line"><a name="l17722"></a><span class="lineno">17722</span>&#160;    <span class="comment">// says &quot;value is converted to a string as if by std::sprintf in the default (&quot;C&quot;) locale&quot;</span></div>
<div class="line"><a name="l17723"></a><span class="lineno">17723</span>&#160;    <span class="comment">// and since sprintf promotes floats to doubles, I think this is exactly what &#39;std::to_chars&#39;</span></div>
<div class="line"><a name="l17724"></a><span class="lineno">17724</span>&#160;    <span class="comment">// does.</span></div>
<div class="line"><a name="l17725"></a><span class="lineno">17725</span>&#160;    <span class="comment">// On the other hand, the documentation for &#39;std::to_chars&#39; requires that &quot;parsing the</span></div>
<div class="line"><a name="l17726"></a><span class="lineno">17726</span>&#160;    <span class="comment">// representation using the corresponding std::from_chars function recovers value exactly&quot;. That</span></div>
<div class="line"><a name="l17727"></a><span class="lineno">17727</span>&#160;    <span class="comment">// indicates that single precision floating-point numbers should be recovered using</span></div>
<div class="line"><a name="l17728"></a><span class="lineno">17728</span>&#160;    <span class="comment">// &#39;std::strtof&#39;.</span></div>
<div class="line"><a name="l17729"></a><span class="lineno">17729</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17730"></a><span class="lineno">17730</span>&#160;    <span class="comment">// NB: If the neighbors are computed for single-precision numbers, there is a single float</span></div>
<div class="line"><a name="l17731"></a><span class="lineno">17731</span>&#160;    <span class="comment">//     (7.0385307e-26f) which can&#39;t be recovered using strtod. The resulting double precision</span></div>
<div class="line"><a name="l17732"></a><span class="lineno">17732</span>&#160;    <span class="comment">//     value is off by 1 ulp.</span></div>
<div class="line"><a name="l17733"></a><span class="lineno">17733</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">// NOLINT(readability-avoid-unconditional-preprocessor-if)</span></div>
<div class="line"><a name="l17734"></a><span class="lineno">17734</span>&#160;    <span class="keyword">const</span> boundaries w = <a class="code" href="namespacedetail_1_1dtoa__impl.html#a6a5ccf11847aab7a0f42f587b33935df">compute_boundaries</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(value));</div>
<div class="line"><a name="l17735"></a><span class="lineno">17735</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l17736"></a><span class="lineno">17736</span>&#160;    <span class="keyword">const</span> boundaries w = <a class="code" href="namespacedetail_1_1dtoa__impl.html#a6a5ccf11847aab7a0f42f587b33935df">compute_boundaries</a>(value);</div>
<div class="line"><a name="l17737"></a><span class="lineno">17737</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l17738"></a><span class="lineno">17738</span>&#160; </div>
<div class="line"><a name="l17739"></a><span class="lineno">17739</span>&#160;    <a class="code" href="namespacedetail_1_1dtoa__impl.html#abdf6bc05c54068a5930f66c2e803e8b8">grisu2</a>(buf, len, decimal_exponent, w.minus, w.w, w.plus);</div>
<div class="line"><a name="l17740"></a><span class="lineno">17740</span>&#160;}</div>
<div class="ttc" id="anamespacedetail_1_1dtoa__impl_html_a6a5ccf11847aab7a0f42f587b33935df"><div class="ttname"><a href="namespacedetail_1_1dtoa__impl.html#a6a5ccf11847aab7a0f42f587b33935df">detail::dtoa_impl::compute_boundaries</a></div><div class="ttdeci">boundaries compute_boundaries(FloatType value)</div><div class="ttdef"><b>Definition:</b> <a href="json_8hpp_source.html#l17010">json.hpp:17010</a></div></div>
<div class="ttc" id="anamespacedetail_1_1dtoa__impl_html_abdf6bc05c54068a5930f66c2e803e8b8"><div class="ttname"><a href="namespacedetail_1_1dtoa__impl.html#abdf6bc05c54068a5930f66c2e803e8b8">detail::dtoa_impl::grisu2</a></div><div class="ttdeci">void grisu2(char *buf, int &amp;len, int &amp;decimal_exponent, FloatType value)</div><div class="ttdef"><b>Definition:</b> <a href="json_8hpp_source.html#l17709">json.hpp:17709</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae877aa13ab872c99a1c614e5e1524807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae877aa13ab872c99a1c614e5e1524807">&#9670;&nbsp;</a></span>grisu2_digit_gen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void detail::dtoa_impl::grisu2_digit_gen </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>decimal_exponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>M_minus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdetail_1_1dtoa__impl_1_1diyfp.html">diyfp</a>&#160;</td>
          <td class="paramname"><em>M_plus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Generates V = buffer * 10^decimal_exponent, such that M- &lt;= V &lt;= M+. M- and M+ must be normalized and share the same exponent -60 &lt;= e &lt;= -32. </p>

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17408">17408</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l17410"></a><span class="lineno">17410</span>&#160;{</div>
<div class="line"><a name="l17411"></a><span class="lineno">17411</span>&#160;    static_assert(<a class="code" href="namespacedetail_1_1dtoa__impl.html#a95c569b7627a9372686f1f77d73e8660">kAlpha</a> &gt;= -60, <span class="stringliteral">&quot;internal error&quot;</span>);</div>
<div class="line"><a name="l17412"></a><span class="lineno">17412</span>&#160;    static_assert(<a class="code" href="namespacedetail_1_1dtoa__impl.html#ae152a095d2dd1a6dd41ef8ad39c26e19">kGamma</a> &lt;= -32, <span class="stringliteral">&quot;internal error&quot;</span>);</div>
<div class="line"><a name="l17413"></a><span class="lineno">17413</span>&#160; </div>
<div class="line"><a name="l17414"></a><span class="lineno">17414</span>&#160;    <span class="comment">// Generates the digits (and the exponent) of a decimal floating-point</span></div>
<div class="line"><a name="l17415"></a><span class="lineno">17415</span>&#160;    <span class="comment">// number V = buffer * 10^decimal_exponent in the range [M-, M+]. The diyfp&#39;s</span></div>
<div class="line"><a name="l17416"></a><span class="lineno">17416</span>&#160;    <span class="comment">// w, M- and M+ share the same exponent e, which satisfies alpha &lt;= e &lt;= gamma.</span></div>
<div class="line"><a name="l17417"></a><span class="lineno">17417</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17418"></a><span class="lineno">17418</span>&#160;    <span class="comment">//               &lt;--------------------------- delta ----&gt;</span></div>
<div class="line"><a name="l17419"></a><span class="lineno">17419</span>&#160;    <span class="comment">//                                  &lt;---- dist ---------&gt;</span></div>
<div class="line"><a name="l17420"></a><span class="lineno">17420</span>&#160;    <span class="comment">// --------------[------------------+-------------------]--------------</span></div>
<div class="line"><a name="l17421"></a><span class="lineno">17421</span>&#160;    <span class="comment">//               M-                 w                   M+</span></div>
<div class="line"><a name="l17422"></a><span class="lineno">17422</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17423"></a><span class="lineno">17423</span>&#160;    <span class="comment">// Grisu2 generates the digits of M+ from left to right and stops as soon as</span></div>
<div class="line"><a name="l17424"></a><span class="lineno">17424</span>&#160;    <span class="comment">// V is in [M-,M+].</span></div>
<div class="line"><a name="l17425"></a><span class="lineno">17425</span>&#160; </div>
<div class="line"><a name="l17426"></a><span class="lineno">17426</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(M_plus.e &gt;= <a class="code" href="namespacedetail_1_1dtoa__impl.html#a95c569b7627a9372686f1f77d73e8660">kAlpha</a>);</div>
<div class="line"><a name="l17427"></a><span class="lineno">17427</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(M_plus.e &lt;= <a class="code" href="namespacedetail_1_1dtoa__impl.html#ae152a095d2dd1a6dd41ef8ad39c26e19">kGamma</a>);</div>
<div class="line"><a name="l17428"></a><span class="lineno">17428</span>&#160; </div>
<div class="line"><a name="l17429"></a><span class="lineno">17429</span>&#160;    std::uint64_t delta = diyfp::sub(M_plus, M_minus).f; <span class="comment">// (significand of (M+ - M-), implicit exponent is e)</span></div>
<div class="line"><a name="l17430"></a><span class="lineno">17430</span>&#160;    std::uint64_t dist  = diyfp::sub(M_plus, w      ).f; <span class="comment">// (significand of (M+ - w ), implicit exponent is e)</span></div>
<div class="line"><a name="l17431"></a><span class="lineno">17431</span>&#160; </div>
<div class="line"><a name="l17432"></a><span class="lineno">17432</span>&#160;    <span class="comment">// Split M+ = f * 2^e into two parts p1 and p2 (note: e &lt; 0):</span></div>
<div class="line"><a name="l17433"></a><span class="lineno">17433</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17434"></a><span class="lineno">17434</span>&#160;    <span class="comment">//      M+ = f * 2^e</span></div>
<div class="line"><a name="l17435"></a><span class="lineno">17435</span>&#160;    <span class="comment">//         = ((f div 2^-e) * 2^-e + (f mod 2^-e)) * 2^e</span></div>
<div class="line"><a name="l17436"></a><span class="lineno">17436</span>&#160;    <span class="comment">//         = ((p1        ) * 2^-e + (p2        )) * 2^e</span></div>
<div class="line"><a name="l17437"></a><span class="lineno">17437</span>&#160;    <span class="comment">//         = p1 + p2 * 2^e</span></div>
<div class="line"><a name="l17438"></a><span class="lineno">17438</span>&#160; </div>
<div class="line"><a name="l17439"></a><span class="lineno">17439</span>&#160;    <span class="keyword">const</span> diyfp one(std::uint64_t{1} &lt;&lt; -M_plus.e, M_plus.e);</div>
<div class="line"><a name="l17440"></a><span class="lineno">17440</span>&#160; </div>
<div class="line"><a name="l17441"></a><span class="lineno">17441</span>&#160;    <span class="keyword">auto</span> p1 = <span class="keyword">static_cast&lt;</span>std::uint32_t<span class="keyword">&gt;</span>(M_plus.f &gt;&gt; -one.e); <span class="comment">// p1 = f div 2^-e (Since -e &gt;= 32, p1 fits into a 32-bit int.)</span></div>
<div class="line"><a name="l17442"></a><span class="lineno">17442</span>&#160;    std::uint64_t p2 = M_plus.f &amp; (one.f - 1);                    <span class="comment">// p2 = f mod 2^-e</span></div>
<div class="line"><a name="l17443"></a><span class="lineno">17443</span>&#160; </div>
<div class="line"><a name="l17444"></a><span class="lineno">17444</span>&#160;    <span class="comment">// 1)</span></div>
<div class="line"><a name="l17445"></a><span class="lineno">17445</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17446"></a><span class="lineno">17446</span>&#160;    <span class="comment">// Generate the digits of the integral part p1 = d[n-1]...d[1]d[0]</span></div>
<div class="line"><a name="l17447"></a><span class="lineno">17447</span>&#160; </div>
<div class="line"><a name="l17448"></a><span class="lineno">17448</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(p1 &gt; 0);</div>
<div class="line"><a name="l17449"></a><span class="lineno">17449</span>&#160; </div>
<div class="line"><a name="l17450"></a><span class="lineno">17450</span>&#160;    std::uint32_t pow10{};</div>
<div class="line"><a name="l17451"></a><span class="lineno">17451</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> k = <a class="code" href="namespacedetail_1_1dtoa__impl.html#a04eb234a28617519974fc962cd4da666">find_largest_pow10</a>(p1, pow10);</div>
<div class="line"><a name="l17452"></a><span class="lineno">17452</span>&#160; </div>
<div class="line"><a name="l17453"></a><span class="lineno">17453</span>&#160;    <span class="comment">//      10^(k-1) &lt;= p1 &lt; 10^k, pow10 = 10^(k-1)</span></div>
<div class="line"><a name="l17454"></a><span class="lineno">17454</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17455"></a><span class="lineno">17455</span>&#160;    <span class="comment">//      p1 = (p1 div 10^(k-1)) * 10^(k-1) + (p1 mod 10^(k-1))</span></div>
<div class="line"><a name="l17456"></a><span class="lineno">17456</span>&#160;    <span class="comment">//         = (d[k-1]         ) * 10^(k-1) + (p1 mod 10^(k-1))</span></div>
<div class="line"><a name="l17457"></a><span class="lineno">17457</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17458"></a><span class="lineno">17458</span>&#160;    <span class="comment">//      M+ = p1                                             + p2 * 2^e</span></div>
<div class="line"><a name="l17459"></a><span class="lineno">17459</span>&#160;    <span class="comment">//         = d[k-1] * 10^(k-1) + (p1 mod 10^(k-1))          + p2 * 2^e</span></div>
<div class="line"><a name="l17460"></a><span class="lineno">17460</span>&#160;    <span class="comment">//         = d[k-1] * 10^(k-1) + ((p1 mod 10^(k-1)) * 2^-e + p2) * 2^e</span></div>
<div class="line"><a name="l17461"></a><span class="lineno">17461</span>&#160;    <span class="comment">//         = d[k-1] * 10^(k-1) + (                         rest) * 2^e</span></div>
<div class="line"><a name="l17462"></a><span class="lineno">17462</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17463"></a><span class="lineno">17463</span>&#160;    <span class="comment">// Now generate the digits d[n] of p1 from left to right (n = k-1,...,0)</span></div>
<div class="line"><a name="l17464"></a><span class="lineno">17464</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17465"></a><span class="lineno">17465</span>&#160;    <span class="comment">//      p1 = d[k-1]...d[n] * 10^n + d[n-1]...d[0]</span></div>
<div class="line"><a name="l17466"></a><span class="lineno">17466</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17467"></a><span class="lineno">17467</span>&#160;    <span class="comment">// but stop as soon as</span></div>
<div class="line"><a name="l17468"></a><span class="lineno">17468</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17469"></a><span class="lineno">17469</span>&#160;    <span class="comment">//      rest * 2^e = (d[n-1]...d[0] * 2^-e + p2) * 2^e &lt;= delta * 2^e</span></div>
<div class="line"><a name="l17470"></a><span class="lineno">17470</span>&#160; </div>
<div class="line"><a name="l17471"></a><span class="lineno">17471</span>&#160;    <span class="keywordtype">int</span> n = k;</div>
<div class="line"><a name="l17472"></a><span class="lineno">17472</span>&#160;    <span class="keywordflow">while</span> (n &gt; 0)</div>
<div class="line"><a name="l17473"></a><span class="lineno">17473</span>&#160;    {</div>
<div class="line"><a name="l17474"></a><span class="lineno">17474</span>&#160;        <span class="comment">// Invariants:</span></div>
<div class="line"><a name="l17475"></a><span class="lineno">17475</span>&#160;        <span class="comment">//      M+ = buffer * 10^n + (p1 + p2 * 2^e)    (buffer = 0 for n = k)</span></div>
<div class="line"><a name="l17476"></a><span class="lineno">17476</span>&#160;        <span class="comment">//      pow10 = 10^(n-1) &lt;= p1 &lt; 10^n</span></div>
<div class="line"><a name="l17477"></a><span class="lineno">17477</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17478"></a><span class="lineno">17478</span>&#160;        <span class="keyword">const</span> std::uint32_t <a class="code" href="addm__nll_8cpp.html#a3fbbd8a3959e76a2bc3455d3bade52dc">d</a> = p1 / pow10;  <span class="comment">// d = p1 div 10^(n-1)</span></div>
<div class="line"><a name="l17479"></a><span class="lineno">17479</span>&#160;        <span class="keyword">const</span> std::uint32_t r = p1 % pow10;  <span class="comment">// r = p1 mod 10^(n-1)</span></div>
<div class="line"><a name="l17480"></a><span class="lineno">17480</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17481"></a><span class="lineno">17481</span>&#160;        <span class="comment">//      M+ = buffer * 10^n + (d * 10^(n-1) + r) + p2 * 2^e</span></div>
<div class="line"><a name="l17482"></a><span class="lineno">17482</span>&#160;        <span class="comment">//         = (buffer * 10 + d) * 10^(n-1) + (r + p2 * 2^e)</span></div>
<div class="line"><a name="l17483"></a><span class="lineno">17483</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17484"></a><span class="lineno">17484</span>&#160;        <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(<a class="code" href="addm__nll_8cpp.html#a3fbbd8a3959e76a2bc3455d3bade52dc">d</a> &lt;= 9);</div>
<div class="line"><a name="l17485"></a><span class="lineno">17485</span>&#160;        buffer[length++] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<span class="charliteral">&#39;0&#39;</span> + <a class="code" href="addm__nll_8cpp.html#a3fbbd8a3959e76a2bc3455d3bade52dc">d</a>); <span class="comment">// buffer := buffer * 10 + d</span></div>
<div class="line"><a name="l17486"></a><span class="lineno">17486</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17487"></a><span class="lineno">17487</span>&#160;        <span class="comment">//      M+ = buffer * 10^(n-1) + (r + p2 * 2^e)</span></div>
<div class="line"><a name="l17488"></a><span class="lineno">17488</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17489"></a><span class="lineno">17489</span>&#160;        p1 = r;</div>
<div class="line"><a name="l17490"></a><span class="lineno">17490</span>&#160;        n--;</div>
<div class="line"><a name="l17491"></a><span class="lineno">17491</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17492"></a><span class="lineno">17492</span>&#160;        <span class="comment">//      M+ = buffer * 10^n + (p1 + p2 * 2^e)</span></div>
<div class="line"><a name="l17493"></a><span class="lineno">17493</span>&#160;        <span class="comment">//      pow10 = 10^n</span></div>
<div class="line"><a name="l17494"></a><span class="lineno">17494</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17495"></a><span class="lineno">17495</span>&#160; </div>
<div class="line"><a name="l17496"></a><span class="lineno">17496</span>&#160;        <span class="comment">// Now check if enough digits have been generated.</span></div>
<div class="line"><a name="l17497"></a><span class="lineno">17497</span>&#160;        <span class="comment">// Compute</span></div>
<div class="line"><a name="l17498"></a><span class="lineno">17498</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17499"></a><span class="lineno">17499</span>&#160;        <span class="comment">//      p1 + p2 * 2^e = (p1 * 2^-e + p2) * 2^e = rest * 2^e</span></div>
<div class="line"><a name="l17500"></a><span class="lineno">17500</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17501"></a><span class="lineno">17501</span>&#160;        <span class="comment">// Note:</span></div>
<div class="line"><a name="l17502"></a><span class="lineno">17502</span>&#160;        <span class="comment">// Since rest and delta share the same exponent e, it suffices to</span></div>
<div class="line"><a name="l17503"></a><span class="lineno">17503</span>&#160;        <span class="comment">// compare the significands.</span></div>
<div class="line"><a name="l17504"></a><span class="lineno">17504</span>&#160;        <span class="keyword">const</span> std::uint64_t rest = (std::uint64_t{p1} &lt;&lt; -one.e) + p2;</div>
<div class="line"><a name="l17505"></a><span class="lineno">17505</span>&#160;        <span class="keywordflow">if</span> (rest &lt;= delta)</div>
<div class="line"><a name="l17506"></a><span class="lineno">17506</span>&#160;        {</div>
<div class="line"><a name="l17507"></a><span class="lineno">17507</span>&#160;            <span class="comment">// V = buffer * 10^n, with M- &lt;= V &lt;= M+.</span></div>
<div class="line"><a name="l17508"></a><span class="lineno">17508</span>&#160; </div>
<div class="line"><a name="l17509"></a><span class="lineno">17509</span>&#160;            decimal_exponent += n;</div>
<div class="line"><a name="l17510"></a><span class="lineno">17510</span>&#160; </div>
<div class="line"><a name="l17511"></a><span class="lineno">17511</span>&#160;            <span class="comment">// We may now just stop. But instead look if the buffer could be</span></div>
<div class="line"><a name="l17512"></a><span class="lineno">17512</span>&#160;            <span class="comment">// decremented to bring V closer to w.</span></div>
<div class="line"><a name="l17513"></a><span class="lineno">17513</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l17514"></a><span class="lineno">17514</span>&#160;            <span class="comment">// pow10 = 10^n is now 1 ulp in the decimal representation V.</span></div>
<div class="line"><a name="l17515"></a><span class="lineno">17515</span>&#160;            <span class="comment">// The rounding procedure works with diyfp&#39;s with an implicit</span></div>
<div class="line"><a name="l17516"></a><span class="lineno">17516</span>&#160;            <span class="comment">// exponent of e.</span></div>
<div class="line"><a name="l17517"></a><span class="lineno">17517</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l17518"></a><span class="lineno">17518</span>&#160;            <span class="comment">//      10^n = (10^n * 2^-e) * 2^e = ulp * 2^e</span></div>
<div class="line"><a name="l17519"></a><span class="lineno">17519</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l17520"></a><span class="lineno">17520</span>&#160;            <span class="keyword">const</span> std::uint64_t ten_n = std::uint64_t{pow10} &lt;&lt; -one.e;</div>
<div class="line"><a name="l17521"></a><span class="lineno">17521</span>&#160;            <a class="code" href="namespacedetail_1_1dtoa__impl.html#a73a15efcb5c2157ea0e1375b98ef0e83">grisu2_round</a>(buffer, length, dist, delta, rest, ten_n);</div>
<div class="line"><a name="l17522"></a><span class="lineno">17522</span>&#160; </div>
<div class="line"><a name="l17523"></a><span class="lineno">17523</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l17524"></a><span class="lineno">17524</span>&#160;        }</div>
<div class="line"><a name="l17525"></a><span class="lineno">17525</span>&#160; </div>
<div class="line"><a name="l17526"></a><span class="lineno">17526</span>&#160;        pow10 /= 10;</div>
<div class="line"><a name="l17527"></a><span class="lineno">17527</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17528"></a><span class="lineno">17528</span>&#160;        <span class="comment">//      pow10 = 10^(n-1) &lt;= p1 &lt; 10^n</span></div>
<div class="line"><a name="l17529"></a><span class="lineno">17529</span>&#160;        <span class="comment">// Invariants restored.</span></div>
<div class="line"><a name="l17530"></a><span class="lineno">17530</span>&#160;    }</div>
<div class="line"><a name="l17531"></a><span class="lineno">17531</span>&#160; </div>
<div class="line"><a name="l17532"></a><span class="lineno">17532</span>&#160;    <span class="comment">// 2)</span></div>
<div class="line"><a name="l17533"></a><span class="lineno">17533</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17534"></a><span class="lineno">17534</span>&#160;    <span class="comment">// The digits of the integral part have been generated:</span></div>
<div class="line"><a name="l17535"></a><span class="lineno">17535</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17536"></a><span class="lineno">17536</span>&#160;    <span class="comment">//      M+ = d[k-1]...d[1]d[0] + p2 * 2^e</span></div>
<div class="line"><a name="l17537"></a><span class="lineno">17537</span>&#160;    <span class="comment">//         = buffer            + p2 * 2^e</span></div>
<div class="line"><a name="l17538"></a><span class="lineno">17538</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17539"></a><span class="lineno">17539</span>&#160;    <span class="comment">// Now generate the digits of the fractional part p2 * 2^e.</span></div>
<div class="line"><a name="l17540"></a><span class="lineno">17540</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17541"></a><span class="lineno">17541</span>&#160;    <span class="comment">// Note:</span></div>
<div class="line"><a name="l17542"></a><span class="lineno">17542</span>&#160;    <span class="comment">// No decimal point is generated: the exponent is adjusted instead.</span></div>
<div class="line"><a name="l17543"></a><span class="lineno">17543</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17544"></a><span class="lineno">17544</span>&#160;    <span class="comment">// p2 actually represents the fraction</span></div>
<div class="line"><a name="l17545"></a><span class="lineno">17545</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17546"></a><span class="lineno">17546</span>&#160;    <span class="comment">//      p2 * 2^e</span></div>
<div class="line"><a name="l17547"></a><span class="lineno">17547</span>&#160;    <span class="comment">//          = p2 / 2^-e</span></div>
<div class="line"><a name="l17548"></a><span class="lineno">17548</span>&#160;    <span class="comment">//          = d[-1] / 10^1 + d[-2] / 10^2 + ...</span></div>
<div class="line"><a name="l17549"></a><span class="lineno">17549</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17550"></a><span class="lineno">17550</span>&#160;    <span class="comment">// Now generate the digits d[-m] of p1 from left to right (m = 1,2,...)</span></div>
<div class="line"><a name="l17551"></a><span class="lineno">17551</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17552"></a><span class="lineno">17552</span>&#160;    <span class="comment">//      p2 * 2^e = d[-1]d[-2]...d[-m] * 10^-m</span></div>
<div class="line"><a name="l17553"></a><span class="lineno">17553</span>&#160;    <span class="comment">//                      + 10^-m * (d[-m-1] / 10^1 + d[-m-2] / 10^2 + ...)</span></div>
<div class="line"><a name="l17554"></a><span class="lineno">17554</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17555"></a><span class="lineno">17555</span>&#160;    <span class="comment">// using</span></div>
<div class="line"><a name="l17556"></a><span class="lineno">17556</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17557"></a><span class="lineno">17557</span>&#160;    <span class="comment">//      10^m * p2 = ((10^m * p2) div 2^-e) * 2^-e + ((10^m * p2) mod 2^-e)</span></div>
<div class="line"><a name="l17558"></a><span class="lineno">17558</span>&#160;    <span class="comment">//                = (                   d) * 2^-e + (                   r)</span></div>
<div class="line"><a name="l17559"></a><span class="lineno">17559</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17560"></a><span class="lineno">17560</span>&#160;    <span class="comment">// or</span></div>
<div class="line"><a name="l17561"></a><span class="lineno">17561</span>&#160;    <span class="comment">//      10^m * p2 * 2^e = d + r * 2^e</span></div>
<div class="line"><a name="l17562"></a><span class="lineno">17562</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17563"></a><span class="lineno">17563</span>&#160;    <span class="comment">// i.e.</span></div>
<div class="line"><a name="l17564"></a><span class="lineno">17564</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17565"></a><span class="lineno">17565</span>&#160;    <span class="comment">//      M+ = buffer + p2 * 2^e</span></div>
<div class="line"><a name="l17566"></a><span class="lineno">17566</span>&#160;    <span class="comment">//         = buffer + 10^-m * (d + r * 2^e)</span></div>
<div class="line"><a name="l17567"></a><span class="lineno">17567</span>&#160;    <span class="comment">//         = (buffer * 10^m + d) * 10^-m + 10^-m * r * 2^e</span></div>
<div class="line"><a name="l17568"></a><span class="lineno">17568</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17569"></a><span class="lineno">17569</span>&#160;    <span class="comment">// and stop as soon as 10^-m * r * 2^e &lt;= delta * 2^e</span></div>
<div class="line"><a name="l17570"></a><span class="lineno">17570</span>&#160; </div>
<div class="line"><a name="l17571"></a><span class="lineno">17571</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(p2 &gt; delta);</div>
<div class="line"><a name="l17572"></a><span class="lineno">17572</span>&#160; </div>
<div class="line"><a name="l17573"></a><span class="lineno">17573</span>&#160;    <span class="keywordtype">int</span> m = 0;</div>
<div class="line"><a name="l17574"></a><span class="lineno">17574</span>&#160;    <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l17575"></a><span class="lineno">17575</span>&#160;    {</div>
<div class="line"><a name="l17576"></a><span class="lineno">17576</span>&#160;        <span class="comment">// Invariant:</span></div>
<div class="line"><a name="l17577"></a><span class="lineno">17577</span>&#160;        <span class="comment">//      M+ = buffer * 10^-m + 10^-m * (d[-m-1] / 10 + d[-m-2] / 10^2 + ...) * 2^e</span></div>
<div class="line"><a name="l17578"></a><span class="lineno">17578</span>&#160;        <span class="comment">//         = buffer * 10^-m + 10^-m * (p2                                 ) * 2^e</span></div>
<div class="line"><a name="l17579"></a><span class="lineno">17579</span>&#160;        <span class="comment">//         = buffer * 10^-m + 10^-m * (1/10 * (10 * p2)                   ) * 2^e</span></div>
<div class="line"><a name="l17580"></a><span class="lineno">17580</span>&#160;        <span class="comment">//         = buffer * 10^-m + 10^-m * (1/10 * ((10*p2 div 2^-e) * 2^-e + (10*p2 mod 2^-e)) * 2^e</span></div>
<div class="line"><a name="l17581"></a><span class="lineno">17581</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17582"></a><span class="lineno">17582</span>&#160;        <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(p2 &lt;= (std::numeric_limits&lt;std::uint64_t&gt;::max)() / 10);</div>
<div class="line"><a name="l17583"></a><span class="lineno">17583</span>&#160;        p2 *= 10;</div>
<div class="line"><a name="l17584"></a><span class="lineno">17584</span>&#160;        <span class="keyword">const</span> std::uint64_t <a class="code" href="addm__nll_8cpp.html#a3fbbd8a3959e76a2bc3455d3bade52dc">d</a> = p2 &gt;&gt; -one.e;     <span class="comment">// d = (10 * p2) div 2^-e</span></div>
<div class="line"><a name="l17585"></a><span class="lineno">17585</span>&#160;        <span class="keyword">const</span> std::uint64_t r = p2 &amp; (one.f - 1); <span class="comment">// r = (10 * p2) mod 2^-e</span></div>
<div class="line"><a name="l17586"></a><span class="lineno">17586</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17587"></a><span class="lineno">17587</span>&#160;        <span class="comment">//      M+ = buffer * 10^-m + 10^-m * (1/10 * (d * 2^-e + r) * 2^e</span></div>
<div class="line"><a name="l17588"></a><span class="lineno">17588</span>&#160;        <span class="comment">//         = buffer * 10^-m + 10^-m * (1/10 * (d + r * 2^e))</span></div>
<div class="line"><a name="l17589"></a><span class="lineno">17589</span>&#160;        <span class="comment">//         = (buffer * 10 + d) * 10^(-m-1) + 10^(-m-1) * r * 2^e</span></div>
<div class="line"><a name="l17590"></a><span class="lineno">17590</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17591"></a><span class="lineno">17591</span>&#160;        <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(<a class="code" href="addm__nll_8cpp.html#a3fbbd8a3959e76a2bc3455d3bade52dc">d</a> &lt;= 9);</div>
<div class="line"><a name="l17592"></a><span class="lineno">17592</span>&#160;        buffer[length++] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<span class="charliteral">&#39;0&#39;</span> + <a class="code" href="addm__nll_8cpp.html#a3fbbd8a3959e76a2bc3455d3bade52dc">d</a>); <span class="comment">// buffer := buffer * 10 + d</span></div>
<div class="line"><a name="l17593"></a><span class="lineno">17593</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17594"></a><span class="lineno">17594</span>&#160;        <span class="comment">//      M+ = buffer * 10^(-m-1) + 10^(-m-1) * r * 2^e</span></div>
<div class="line"><a name="l17595"></a><span class="lineno">17595</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17596"></a><span class="lineno">17596</span>&#160;        p2 = r;</div>
<div class="line"><a name="l17597"></a><span class="lineno">17597</span>&#160;        m++;</div>
<div class="line"><a name="l17598"></a><span class="lineno">17598</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17599"></a><span class="lineno">17599</span>&#160;        <span class="comment">//      M+ = buffer * 10^-m + 10^-m * p2 * 2^e</span></div>
<div class="line"><a name="l17600"></a><span class="lineno">17600</span>&#160;        <span class="comment">// Invariant restored.</span></div>
<div class="line"><a name="l17601"></a><span class="lineno">17601</span>&#160; </div>
<div class="line"><a name="l17602"></a><span class="lineno">17602</span>&#160;        <span class="comment">// Check if enough digits have been generated.</span></div>
<div class="line"><a name="l17603"></a><span class="lineno">17603</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l17604"></a><span class="lineno">17604</span>&#160;        <span class="comment">//      10^-m * p2 * 2^e &lt;= delta * 2^e</span></div>
<div class="line"><a name="l17605"></a><span class="lineno">17605</span>&#160;        <span class="comment">//              p2 * 2^e &lt;= 10^m * delta * 2^e</span></div>
<div class="line"><a name="l17606"></a><span class="lineno">17606</span>&#160;        <span class="comment">//                    p2 &lt;= 10^m * delta</span></div>
<div class="line"><a name="l17607"></a><span class="lineno">17607</span>&#160;        delta *= 10;</div>
<div class="line"><a name="l17608"></a><span class="lineno">17608</span>&#160;        dist  *= 10;</div>
<div class="line"><a name="l17609"></a><span class="lineno">17609</span>&#160;        <span class="keywordflow">if</span> (p2 &lt;= delta)</div>
<div class="line"><a name="l17610"></a><span class="lineno">17610</span>&#160;        {</div>
<div class="line"><a name="l17611"></a><span class="lineno">17611</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l17612"></a><span class="lineno">17612</span>&#160;        }</div>
<div class="line"><a name="l17613"></a><span class="lineno">17613</span>&#160;    }</div>
<div class="line"><a name="l17614"></a><span class="lineno">17614</span>&#160; </div>
<div class="line"><a name="l17615"></a><span class="lineno">17615</span>&#160;    <span class="comment">// V = buffer * 10^-m, with M- &lt;= V &lt;= M+.</span></div>
<div class="line"><a name="l17616"></a><span class="lineno">17616</span>&#160; </div>
<div class="line"><a name="l17617"></a><span class="lineno">17617</span>&#160;    decimal_exponent -= m;</div>
<div class="line"><a name="l17618"></a><span class="lineno">17618</span>&#160; </div>
<div class="line"><a name="l17619"></a><span class="lineno">17619</span>&#160;    <span class="comment">// 1 ulp in the decimal representation is now 10^-m.</span></div>
<div class="line"><a name="l17620"></a><span class="lineno">17620</span>&#160;    <span class="comment">// Since delta and dist are now scaled by 10^m, we need to do the</span></div>
<div class="line"><a name="l17621"></a><span class="lineno">17621</span>&#160;    <span class="comment">// same with ulp in order to keep the units in sync.</span></div>
<div class="line"><a name="l17622"></a><span class="lineno">17622</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17623"></a><span class="lineno">17623</span>&#160;    <span class="comment">//      10^m * 10^-m = 1 = 2^-e * 2^e = ten_m * 2^e</span></div>
<div class="line"><a name="l17624"></a><span class="lineno">17624</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17625"></a><span class="lineno">17625</span>&#160;    <span class="keyword">const</span> std::uint64_t ten_m = one.f;</div>
<div class="line"><a name="l17626"></a><span class="lineno">17626</span>&#160;    <a class="code" href="namespacedetail_1_1dtoa__impl.html#a73a15efcb5c2157ea0e1375b98ef0e83">grisu2_round</a>(buffer, length, dist, delta, p2, ten_m);</div>
<div class="line"><a name="l17627"></a><span class="lineno">17627</span>&#160; </div>
<div class="line"><a name="l17628"></a><span class="lineno">17628</span>&#160;    <span class="comment">// By construction this algorithm generates the shortest possible decimal</span></div>
<div class="line"><a name="l17629"></a><span class="lineno">17629</span>&#160;    <span class="comment">// number (Loitsch, Theorem 6.2) which rounds back to w.</span></div>
<div class="line"><a name="l17630"></a><span class="lineno">17630</span>&#160;    <span class="comment">// For an input number of precision p, at least</span></div>
<div class="line"><a name="l17631"></a><span class="lineno">17631</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17632"></a><span class="lineno">17632</span>&#160;    <span class="comment">//      N = 1 + ceil(p * log_10(2))</span></div>
<div class="line"><a name="l17633"></a><span class="lineno">17633</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17634"></a><span class="lineno">17634</span>&#160;    <span class="comment">// decimal digits are sufficient to identify all binary floating-point</span></div>
<div class="line"><a name="l17635"></a><span class="lineno">17635</span>&#160;    <span class="comment">// numbers (Matula, &quot;In-and-Out conversions&quot;).</span></div>
<div class="line"><a name="l17636"></a><span class="lineno">17636</span>&#160;    <span class="comment">// This implies that the algorithm does not produce more than N decimal</span></div>
<div class="line"><a name="l17637"></a><span class="lineno">17637</span>&#160;    <span class="comment">// digits.</span></div>
<div class="line"><a name="l17638"></a><span class="lineno">17638</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17639"></a><span class="lineno">17639</span>&#160;    <span class="comment">//      N = 17 for p = 53 (IEEE double precision)</span></div>
<div class="line"><a name="l17640"></a><span class="lineno">17640</span>&#160;    <span class="comment">//      N = 9  for p = 24 (IEEE single precision)</span></div>
<div class="line"><a name="l17641"></a><span class="lineno">17641</span>&#160;}</div>
<div class="ttc" id="aaddm__nll_8cpp_html_a3fbbd8a3959e76a2bc3455d3bade52dc"><div class="ttname"><a href="addm__nll_8cpp.html#a3fbbd8a3959e76a2bc3455d3bade52dc">d</a></div><div class="ttdeci">float d</div><div class="ttdef"><b>Definition:</b> <a href="addm__nll_8cpp_source.html#l00011">addm_nll.cpp:11</a></div></div>
<div class="ttc" id="anamespacedetail_1_1dtoa__impl_html_a04eb234a28617519974fc962cd4da666"><div class="ttname"><a href="namespacedetail_1_1dtoa__impl.html#a04eb234a28617519974fc962cd4da666">detail::dtoa_impl::find_largest_pow10</a></div><div class="ttdeci">int find_largest_pow10(const std::uint32_t n, std::uint32_t &amp;pow10)</div><div class="ttdef"><b>Definition:</b> <a href="json_8hpp_source.html#l17313">json.hpp:17313</a></div></div>
<div class="ttc" id="anamespacedetail_1_1dtoa__impl_html_a73a15efcb5c2157ea0e1375b98ef0e83"><div class="ttname"><a href="namespacedetail_1_1dtoa__impl.html#a73a15efcb5c2157ea0e1375b98ef0e83">detail::dtoa_impl::grisu2_round</a></div><div class="ttdeci">void grisu2_round(char *buf, int len, std::uint64_t dist, std::uint64_t delta, std::uint64_t rest, std::uint64_t ten_k)</div><div class="ttdef"><b>Definition:</b> <a href="json_8hpp_source.html#l17367">json.hpp:17367</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a73a15efcb5c2157ea0e1375b98ef0e83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73a15efcb5c2157ea0e1375b98ef0e83">&#9670;&nbsp;</a></span>grisu2_round()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void detail::dtoa_impl::grisu2_round </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint64_t&#160;</td>
          <td class="paramname"><em>dist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint64_t&#160;</td>
          <td class="paramname"><em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint64_t&#160;</td>
          <td class="paramname"><em>rest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint64_t&#160;</td>
          <td class="paramname"><em>ten_k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17367">17367</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l17369"></a><span class="lineno">17369</span>&#160;{</div>
<div class="line"><a name="l17370"></a><span class="lineno">17370</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(len &gt;= 1);</div>
<div class="line"><a name="l17371"></a><span class="lineno">17371</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(dist &lt;= delta);</div>
<div class="line"><a name="l17372"></a><span class="lineno">17372</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(rest &lt;= delta);</div>
<div class="line"><a name="l17373"></a><span class="lineno">17373</span>&#160;    <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(ten_k &gt; 0);</div>
<div class="line"><a name="l17374"></a><span class="lineno">17374</span>&#160; </div>
<div class="line"><a name="l17375"></a><span class="lineno">17375</span>&#160;    <span class="comment">//               &lt;--------------------------- delta ----&gt;</span></div>
<div class="line"><a name="l17376"></a><span class="lineno">17376</span>&#160;    <span class="comment">//                                  &lt;---- dist ---------&gt;</span></div>
<div class="line"><a name="l17377"></a><span class="lineno">17377</span>&#160;    <span class="comment">// --------------[------------------+-------------------]--------------</span></div>
<div class="line"><a name="l17378"></a><span class="lineno">17378</span>&#160;    <span class="comment">//               M-                 w                   M+</span></div>
<div class="line"><a name="l17379"></a><span class="lineno">17379</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17380"></a><span class="lineno">17380</span>&#160;    <span class="comment">//                                  ten_k</span></div>
<div class="line"><a name="l17381"></a><span class="lineno">17381</span>&#160;    <span class="comment">//                                &lt;------&gt;</span></div>
<div class="line"><a name="l17382"></a><span class="lineno">17382</span>&#160;    <span class="comment">//                                       &lt;---- rest ----&gt;</span></div>
<div class="line"><a name="l17383"></a><span class="lineno">17383</span>&#160;    <span class="comment">// --------------[------------------+----+--------------]--------------</span></div>
<div class="line"><a name="l17384"></a><span class="lineno">17384</span>&#160;    <span class="comment">//                                  w    V</span></div>
<div class="line"><a name="l17385"></a><span class="lineno">17385</span>&#160;    <span class="comment">//                                       = buf * 10^k</span></div>
<div class="line"><a name="l17386"></a><span class="lineno">17386</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l17387"></a><span class="lineno">17387</span>&#160;    <span class="comment">// ten_k represents a unit-in-the-last-place in the decimal representation</span></div>
<div class="line"><a name="l17388"></a><span class="lineno">17388</span>&#160;    <span class="comment">// stored in buf.</span></div>
<div class="line"><a name="l17389"></a><span class="lineno">17389</span>&#160;    <span class="comment">// Decrement buf by ten_k while this takes buf closer to w.</span></div>
<div class="line"><a name="l17390"></a><span class="lineno">17390</span>&#160; </div>
<div class="line"><a name="l17391"></a><span class="lineno">17391</span>&#160;    <span class="comment">// The tests are written in this order to avoid overflow in unsigned</span></div>
<div class="line"><a name="l17392"></a><span class="lineno">17392</span>&#160;    <span class="comment">// integer arithmetic.</span></div>
<div class="line"><a name="l17393"></a><span class="lineno">17393</span>&#160; </div>
<div class="line"><a name="l17394"></a><span class="lineno">17394</span>&#160;    <span class="keywordflow">while</span> (rest &lt; dist</div>
<div class="line"><a name="l17395"></a><span class="lineno">17395</span>&#160;            &amp;&amp; delta - rest &gt;= ten_k</div>
<div class="line"><a name="l17396"></a><span class="lineno">17396</span>&#160;            &amp;&amp; (rest + ten_k &lt; dist || dist - rest &gt; rest + ten_k - dist))</div>
<div class="line"><a name="l17397"></a><span class="lineno">17397</span>&#160;    {</div>
<div class="line"><a name="l17398"></a><span class="lineno">17398</span>&#160;        <a class="code" href="json_8hpp.html#a69f131cff49da1989667220173fbeae6">JSON_ASSERT</a>(buf[len - 1] != <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l17399"></a><span class="lineno">17399</span>&#160;        buf[len - 1]--;</div>
<div class="line"><a name="l17400"></a><span class="lineno">17400</span>&#160;        rest += ten_k;</div>
<div class="line"><a name="l17401"></a><span class="lineno">17401</span>&#160;    }</div>
<div class="line"><a name="l17402"></a><span class="lineno">17402</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c879bf97b806cacbcbb2da07a5ff5c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c879bf97b806cacbcbb2da07a5ff5c8">&#9670;&nbsp;</a></span>reinterpret_bits()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Target , typename Source &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Target detail::dtoa_impl::reinterpret_bits </td>
          <td>(</td>
          <td class="paramtype">const Source&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l16869">16869</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l16870"></a><span class="lineno">16870</span>&#160;{</div>
<div class="line"><a name="l16871"></a><span class="lineno">16871</span>&#160;    static_assert(<span class="keyword">sizeof</span>(Target) == <span class="keyword">sizeof</span>(Source), <span class="stringliteral">&quot;size mismatch&quot;</span>);</div>
<div class="line"><a name="l16872"></a><span class="lineno">16872</span>&#160; </div>
<div class="line"><a name="l16873"></a><span class="lineno">16873</span>&#160;    Target target;</div>
<div class="line"><a name="l16874"></a><span class="lineno">16874</span>&#160;    std::memcpy(&amp;target, &amp;source, <span class="keyword">sizeof</span>(Source));</div>
<div class="line"><a name="l16875"></a><span class="lineno">16875</span>&#160;    <span class="keywordflow">return</span> target;</div>
<div class="line"><a name="l16876"></a><span class="lineno">16876</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a95c569b7627a9372686f1f77d73e8660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95c569b7627a9372686f1f77d73e8660">&#9670;&nbsp;</a></span>kAlpha</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int detail::dtoa_impl::kAlpha = -60</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17132">17132</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>

</div>
</div>
<a id="ae152a095d2dd1a6dd41ef8ad39c26e19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae152a095d2dd1a6dd41ef8ad39c26e19">&#9670;&nbsp;</a></span>kGamma</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int detail::dtoa_impl::kGamma = -32</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="json_8hpp_source.html#l17133">17133</a> of file <a class="el" href="json_8hpp_source.html">json.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
