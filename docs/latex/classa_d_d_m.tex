\hypertarget{classa_d_d_m}{}\doxysection{a\+DDM Class Reference}
\label{classa_d_d_m}\index{aDDM@{aDDM}}


{\ttfamily \#include $<$addm.\+h$>$}



Inheritance diagram for a\+DDM\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=127pt]{classa_d_d_m__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for a\+DDM\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=127pt]{classa_d_d_m__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classa_d_d_m_ad9ecaeec702acd80c74d483ca653524d}{a\+DDM}} (float \mbox{\hyperlink{class_d_d_m_a15511d3cf0f7deb5de073dcdfd09bcc6}{d}}, float \mbox{\hyperlink{class_d_d_m_a17570a6c2378cdb363437f39a5fa3f00}{sigma}}, float \mbox{\hyperlink{classa_d_d_m_a9c6c014066b0930baaa665b06dec9bb3}{theta}}, float \mbox{\hyperlink{class_d_d_m_a0293f051d7889ee014fb55c4939e4783}{barrier}}, unsigned int \mbox{\hyperlink{class_d_d_m_a0821be8a65988df0004b4d9f4239a020}{non\+Decision\+Time}}=0, float \mbox{\hyperlink{class_d_d_m_a0cecc28e691846bce6dccb02f34aef07}{bias}}=0)
\begin{DoxyCompactList}\small\item\em Construct a new \mbox{\hyperlink{classa_d_d_m}{a\+DDM}} object. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{classa_d_d_m_a9ccee0abe15711f09f8eee0a782f3e06}{get\+Trial\+Likelihood}} (\mbox{\hyperlink{classa_d_d_m_trial}{a\+DDMTrial}} trial, bool debug=false, int time\+Step=10, float approx\+State\+Step=0.\+1)
\begin{DoxyCompactList}\small\item\em Compute the likelihood of the data for a single trial given \mbox{\hyperlink{classa_d_d_m}{a\+DDM}} Parameters. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classa_d_d_m_trial}{a\+DDMTrial}} \mbox{\hyperlink{classa_d_d_m_ac9cc21a00f8516e23a0e3b15f913999b}{simulate\+Trial}} (int \mbox{\hyperlink{ddm__nll__thread_8cpp_a66ae2c9a86cab7b4970ecc123c799c45}{value\+Left}}, int value\+Right, \mbox{\hyperlink{class_fixation_data}{Fixation\+Data}} fixation\+Data, int time\+Step=10, int num\+Fix\+Dists=3, \mbox{\hyperlink{addm_8h_ac73e0abca434ac872480feb6a7cf4c56}{fix\+Dists}} fixation\+Dist=\{\}, vector$<$ int $>$ time\+Bins=\{\})
\begin{DoxyCompactList}\small\item\em Generate simulated fixations provided item values and empirical fixation data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
float \mbox{\hyperlink{classa_d_d_m_a9c6c014066b0930baaa665b06dec9bb3}{theta}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 46 of file addm.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classa_d_d_m_ad9ecaeec702acd80c74d483ca653524d}\label{classa_d_d_m_ad9ecaeec702acd80c74d483ca653524d}} 
\index{aDDM@{aDDM}!aDDM@{aDDM}}
\index{aDDM@{aDDM}!aDDM@{aDDM}}
\doxysubsubsection{\texorpdfstring{aDDM()}{aDDM()}}
{\footnotesize\ttfamily a\+DDM\+::a\+DDM (\begin{DoxyParamCaption}\item[{float}]{d,  }\item[{float}]{sigma,  }\item[{float}]{theta,  }\item[{float}]{barrier,  }\item[{unsigned int}]{non\+Decision\+Time = {\ttfamily 0},  }\item[{float}]{bias = {\ttfamily 0} }\end{DoxyParamCaption})}



Construct a new \mbox{\hyperlink{classa_d_d_m}{a\+DDM}} object. 


\begin{DoxyParams}{Parameters}
{\em d} & drift rate. \\
\hline
{\em sigma} & noise or standard deviation for the normal distribution. \\
\hline
{\em theta} & ranges on \mbox{[}0,1\mbox{]} and indicates level of attentional bias. \\
\hline
{\em barrier} & positive magnitude of the signal thresholds. \\
\hline
{\em non\+Decision\+Time} & amount of time in milliseconds in which only noise is added to the decision variable. \\
\hline
{\em bias} & corresponds to the initial value of the decision variable. Must be smaller than barrier. \\
\hline
\end{DoxyParams}


Definition at line 42 of file addm.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{43                                               : }
\DoxyCodeLine{44     \mbox{\hyperlink{class_d_d_m_a5c65c29756565b1a6a9ca6605fa1c003}{DDM}}(\mbox{\hyperlink{class_d_d_m_a15511d3cf0f7deb5de073dcdfd09bcc6}{d}}, \mbox{\hyperlink{class_d_d_m_a17570a6c2378cdb363437f39a5fa3f00}{sigma}}, \mbox{\hyperlink{class_d_d_m_a0293f051d7889ee014fb55c4939e4783}{barrier}}, \mbox{\hyperlink{class_d_d_m_a0821be8a65988df0004b4d9f4239a020}{nonDecisionTime}}, \mbox{\hyperlink{class_d_d_m_a0cecc28e691846bce6dccb02f34aef07}{bias}}) \{}
\DoxyCodeLine{45         this-\/>\mbox{\hyperlink{classa_d_d_m_a9c6c014066b0930baaa665b06dec9bb3}{theta}} = \mbox{\hyperlink{classa_d_d_m_a9c6c014066b0930baaa665b06dec9bb3}{theta}};}
\DoxyCodeLine{46 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classa_d_d_m_a9ccee0abe15711f09f8eee0a782f3e06}\label{classa_d_d_m_a9ccee0abe15711f09f8eee0a782f3e06}} 
\index{aDDM@{aDDM}!getTrialLikelihood@{getTrialLikelihood}}
\index{getTrialLikelihood@{getTrialLikelihood}!aDDM@{aDDM}}
\doxysubsubsection{\texorpdfstring{getTrialLikelihood()}{getTrialLikelihood()}}
{\footnotesize\ttfamily double a\+DDM\+::get\+Trial\+Likelihood (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classa_d_d_m_trial}{a\+DDMTrial}}}]{trial,  }\item[{bool}]{debug = {\ttfamily false},  }\item[{int}]{time\+Step = {\ttfamily 10},  }\item[{float}]{approx\+State\+Step = {\ttfamily 0.1} }\end{DoxyParamCaption})}



Compute the likelihood of the data for a single trial given \mbox{\hyperlink{classa_d_d_m}{a\+DDM}} Parameters. 


\begin{DoxyParams}{Parameters}
{\em trial} & \mbox{\hyperlink{classa_d_d_m_trial}{a\+DDMTrial}} object. \\
\hline
{\em debug} & True if state variables should be printed for debugging purposes \\
\hline
{\em time\+Step} & value in milliseconds used for binning the time axis. \\
\hline
{\em approxstate\+Step} & used for binning the RDV axis. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
double representing the likelihood for the given trial. 
\end{DoxyReturn}


Definition at line 48 of file addm.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{48                                                                                                 \{}
\DoxyCodeLine{49     \textcolor{keywordflow}{if} (debug) \{}
\DoxyCodeLine{50         std::cout << std::setprecision(6) << std::fixed;}
\DoxyCodeLine{51     \}}
\DoxyCodeLine{52     std::vector<int> correctedFixItem = trial.\mbox{\hyperlink{classa_d_d_m_trial_a8b7e649ce0fded823e1191c2f9675cf2}{fixItem}};}
\DoxyCodeLine{53     std::vector<int> correctedFixTime = trial.\mbox{\hyperlink{classa_d_d_m_trial_adf04171bada997ac559e29629524da2f}{fixTime}};}
\DoxyCodeLine{54     \textcolor{keywordflow}{if} (this-\/>\mbox{\hyperlink{class_d_d_m_a0821be8a65988df0004b4d9f4239a020}{nonDecisionTime}} > 0) \{}
\DoxyCodeLine{55         \textcolor{keywordtype}{int} remainingNDT = this-\/>\mbox{\hyperlink{class_d_d_m_a0821be8a65988df0004b4d9f4239a020}{nonDecisionTime}};}
\DoxyCodeLine{56         assert(trial.\mbox{\hyperlink{classa_d_d_m_trial_a8b7e649ce0fded823e1191c2f9675cf2}{fixItem}}.size() == trial.\mbox{\hyperlink{classa_d_d_m_trial_adf04171bada997ac559e29629524da2f}{fixTime}}.size());}
\DoxyCodeLine{57         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < trial.\mbox{\hyperlink{classa_d_d_m_trial_a8b7e649ce0fded823e1191c2f9675cf2}{fixItem}}.size(); i++) \{}
\DoxyCodeLine{58             \textcolor{keywordtype}{int} fItem = trial.\mbox{\hyperlink{classa_d_d_m_trial_a8b7e649ce0fded823e1191c2f9675cf2}{fixItem}}[i];}
\DoxyCodeLine{59             \textcolor{keywordtype}{int} fTime = trial.\mbox{\hyperlink{classa_d_d_m_trial_adf04171bada997ac559e29629524da2f}{fixTime}}[i];}
\DoxyCodeLine{60             \textcolor{keywordflow}{if} (remainingNDT > 0) \{}
\DoxyCodeLine{61                 correctedFixItem.push\_back(0);}
\DoxyCodeLine{62                 correctedFixTime.push\_back(min(remainingNDT, fTime));}
\DoxyCodeLine{63                 correctedFixItem.push\_back(fItem);}
\DoxyCodeLine{64                 correctedFixTime.push\_back(max(fTime -\/ remainingNDT, 0));}
\DoxyCodeLine{65             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{66                 correctedFixItem.push\_back(fItem);}
\DoxyCodeLine{67                 correctedFixTime.push\_back(fTime);}
\DoxyCodeLine{68             \}}
\DoxyCodeLine{69         \}}
\DoxyCodeLine{70     \}}
\DoxyCodeLine{71 }
\DoxyCodeLine{72     \textcolor{keywordflow}{if} (debug) \{}
\DoxyCodeLine{73         std::cout << \textcolor{stringliteral}{"{}CFI"{}} << std::endl;}
\DoxyCodeLine{74         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i : correctedFixItem) \{}
\DoxyCodeLine{75             std::cout << i << std::endl;}
\DoxyCodeLine{76         \}}
\DoxyCodeLine{77         std::cout << \textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/"{}} << std::endl;}
\DoxyCodeLine{78         std::cout << \textcolor{stringliteral}{"{}CFT"{}} << std::endl;}
\DoxyCodeLine{79         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} t : correctedFixTime) \{}
\DoxyCodeLine{80             std::cout << t << std::endl;}
\DoxyCodeLine{81         \}}
\DoxyCodeLine{82         std::cout << \textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/"{}} << std::endl;}
\DoxyCodeLine{83     \}}
\DoxyCodeLine{84     }
\DoxyCodeLine{85     \textcolor{keywordtype}{int} numTimeSteps = 0;}
\DoxyCodeLine{86     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} fTime : correctedFixTime) \{}
\DoxyCodeLine{87         numTimeSteps += fTime / timeStep;}
\DoxyCodeLine{88     \}}
\DoxyCodeLine{89     \textcolor{keywordflow}{if} (numTimeSteps < 1) \{}
\DoxyCodeLine{90         \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"{}Trial response time is smaller than time step"{}});}
\DoxyCodeLine{91     \}}
\DoxyCodeLine{92     numTimeSteps++;}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     std::vector<float> barrierUp(numTimeSteps);}
\DoxyCodeLine{95     std::fill(barrierUp.begin(), barrierUp.end(), this-\/>barrier);}
\DoxyCodeLine{96     std::vector<float> barrierDown(numTimeSteps);}
\DoxyCodeLine{97     std::fill(barrierDown.begin(), barrierDown.end(), -\/this-\/>barrier);}
\DoxyCodeLine{98     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < numTimeSteps; i++) \{}
\DoxyCodeLine{99         barrierUp.at(i) = this-\/>\mbox{\hyperlink{class_d_d_m_a0293f051d7889ee014fb55c4939e4783}{barrier}} / (1 + (\mbox{\hyperlink{util_8h_ae307adc0568237d1e5bc8802f60f67bf}{DECAY}} * i));}
\DoxyCodeLine{100         barrierDown.at(i) = -\/this-\/>\mbox{\hyperlink{class_d_d_m_a0293f051d7889ee014fb55c4939e4783}{barrier}} / (1 + (\mbox{\hyperlink{util_8h_ae307adc0568237d1e5bc8802f60f67bf}{DECAY}} * i));}
\DoxyCodeLine{101     \}}
\DoxyCodeLine{102 }
\DoxyCodeLine{103     \textcolor{keywordtype}{int} halfNumStateBins = ceil(this-\/>\mbox{\hyperlink{class_d_d_m_a0293f051d7889ee014fb55c4939e4783}{barrier}} / approxStateStep); }
\DoxyCodeLine{104     \textcolor{keywordtype}{float} stateStep = this-\/>\mbox{\hyperlink{class_d_d_m_a0293f051d7889ee014fb55c4939e4783}{barrier}} / (halfNumStateBins + 0.5);}
\DoxyCodeLine{105     std::vector<float> states;}
\DoxyCodeLine{106     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{float} ss = barrierDown.at(0) + (stateStep / 2); ss <= barrierUp.at(0) -\/ (stateStep / 2); ss += stateStep) \{}
\DoxyCodeLine{107         states.push\_back(ss);}
\DoxyCodeLine{108     \}}
\DoxyCodeLine{109 }
\DoxyCodeLine{110     \textcolor{keywordtype}{float} biasStateVal = MAXFLOAT;}
\DoxyCodeLine{111     \textcolor{keywordtype}{int} biasState = 0;}
\DoxyCodeLine{112     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < states.size(); i++) \{}
\DoxyCodeLine{113         \textcolor{keywordtype}{float} r = abs(states.at(i) -\/ this-\/>bias);}
\DoxyCodeLine{114         \textcolor{keywordflow}{if} (r < biasStateVal) \{}
\DoxyCodeLine{115             biasState = i;}
\DoxyCodeLine{116             biasStateVal = r;}
\DoxyCodeLine{117         \}}
\DoxyCodeLine{118     \}}
\DoxyCodeLine{119 }
\DoxyCodeLine{120     \textcolor{comment}{// Initialize an empty probability state grid}}
\DoxyCodeLine{121     std::vector<std::vector<double>> prStates; \textcolor{comment}{// prStates[state][timeStep]}}
\DoxyCodeLine{122     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < states.size(); i++) \{}
\DoxyCodeLine{123         prStates.push\_back(\{\});}
\DoxyCodeLine{124         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < numTimeSteps; j++) \{}
\DoxyCodeLine{125             prStates.at(i).push\_back(0);}
\DoxyCodeLine{126         \}}
\DoxyCodeLine{127     \}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \textcolor{comment}{// Initialize vectors corresponding to the probability of crossing the }}
\DoxyCodeLine{130     \textcolor{comment}{// top or bottom barriers at each timestep. }}
\DoxyCodeLine{131     std::vector<double> probUpCrossing; }
\DoxyCodeLine{132     std::vector<double> probDownCrossing;}
\DoxyCodeLine{133     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numTimeSteps; i++) \{}
\DoxyCodeLine{134         probUpCrossing.push\_back(0);}
\DoxyCodeLine{135         probDownCrossing.push\_back(0);}
\DoxyCodeLine{136     \}}
\DoxyCodeLine{137     prStates.at(biasState).at(0) = 1; }
\DoxyCodeLine{138 }
\DoxyCodeLine{139     \textcolor{keywordtype}{int} time = 1;}
\DoxyCodeLine{140 }
\DoxyCodeLine{141     \textcolor{comment}{// Initialize a change matrix where each value at (i, j) }}
\DoxyCodeLine{142     \textcolor{comment}{// indicates the difference between states[i] and states[j] }}
\DoxyCodeLine{143     std::vector<std::vector<float>> changeMatrix(states.size(), std::vector<float>(states.size())); }
\DoxyCodeLine{144     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < states.size(); i++) \{}
\DoxyCodeLine{145         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < states.size(); j++) \{}
\DoxyCodeLine{146             changeMatrix[i][j] = states[i] -\/ states[j];}
\DoxyCodeLine{147         \}}
\DoxyCodeLine{148     \}}
\DoxyCodeLine{149     \textcolor{keywordflow}{if} (debug) \{}
\DoxyCodeLine{150         printMatrix<float>(changeMatrix, \textcolor{stringliteral}{"{}CHANGE MATRIX"{}});}
\DoxyCodeLine{151     \}}
\DoxyCodeLine{152 }
\DoxyCodeLine{153     \textcolor{comment}{// Distance from every state to the top barrier at each timestep}}
\DoxyCodeLine{154     std::vector<std::vector<float>> changeUp(states.size(), std::vector<float>(numTimeSteps));}
\DoxyCodeLine{155     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < states.size(); i++) \{}
\DoxyCodeLine{156         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < numTimeSteps; j++) \{}
\DoxyCodeLine{157             changeUp[i][j] = barrierUp[j] -\/ states[i];}
\DoxyCodeLine{158         \}}
\DoxyCodeLine{159     \}}
\DoxyCodeLine{160     \textcolor{keywordflow}{if} (debug) \{}
\DoxyCodeLine{161         printMatrix<float>(changeUp, \textcolor{stringliteral}{"{}CHANGE UP"{}});}
\DoxyCodeLine{162     \}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164 }
\DoxyCodeLine{165     \textcolor{comment}{// Distance from every state to the bottom barrier at each timestep}}
\DoxyCodeLine{166     std::vector<std::vector<float>> changeDown(states.size(), std::vector<float>(numTimeSteps));}
\DoxyCodeLine{167     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < states.size(); i++) \{}
\DoxyCodeLine{168         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < numTimeSteps; j++) \{}
\DoxyCodeLine{169             changeDown[i][j] = barrierDown[j] -\/ states[i];}
\DoxyCodeLine{170         \}}
\DoxyCodeLine{171     \}}
\DoxyCodeLine{172     \textcolor{keywordflow}{if} (debug) \{}
\DoxyCodeLine{173         printMatrix<float>(changeDown, \textcolor{stringliteral}{"{}CHANGE DOWN"{}});}
\DoxyCodeLine{174     \}}
\DoxyCodeLine{175 }
\DoxyCodeLine{176     assert(correctedFixItem.size() == correctedFixTime.size());}
\DoxyCodeLine{177     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < correctedFixItem.size(); i++) \{}
\DoxyCodeLine{178         \textcolor{keywordtype}{int} fItem = correctedFixItem[i];}
\DoxyCodeLine{179         \textcolor{keywordtype}{int} fTime = correctedFixTime[i];}
\DoxyCodeLine{180 }
\DoxyCodeLine{181         \textcolor{keywordflow}{if} (debug) \{}
\DoxyCodeLine{182             std::cout << \textcolor{stringliteral}{"{}============"{}} << std::endl;}
\DoxyCodeLine{183             std::cout << \textcolor{stringliteral}{"{}fItem "{}} << i << \textcolor{stringliteral}{"{}: "{}} << fItem << std::endl;}
\DoxyCodeLine{184             std::cout << \textcolor{stringliteral}{"{}fTime "{}} << i << \textcolor{stringliteral}{"{}: "{}} << fTime << std::endl;}
\DoxyCodeLine{185             std::cout << \textcolor{stringliteral}{"{}============"{}} << std::endl;}
\DoxyCodeLine{186         \}}
\DoxyCodeLine{187 }
\DoxyCodeLine{188         \textcolor{keywordtype}{float} mean;}
\DoxyCodeLine{189         \textcolor{keywordflow}{if} (fItem == 1) \{}
\DoxyCodeLine{190             mean = this-\/>\mbox{\hyperlink{class_d_d_m_a15511d3cf0f7deb5de073dcdfd09bcc6}{d}} * (trial.\mbox{\hyperlink{class_d_d_m_trial_ae949e54554e10660f73878a07a95d14d}{valueLeft}} -\/ (this-\/>\mbox{\hyperlink{classa_d_d_m_a9c6c014066b0930baaa665b06dec9bb3}{theta}} * trial.\mbox{\hyperlink{class_d_d_m_trial_a9e1a0900b92b8d16fb3bd49894c9dc2c}{valueRight}}));}
\DoxyCodeLine{191         \}}
\DoxyCodeLine{192         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fItem == 2) \{}
\DoxyCodeLine{193             mean = this-\/>\mbox{\hyperlink{class_d_d_m_a15511d3cf0f7deb5de073dcdfd09bcc6}{d}} * ((this-\/>\mbox{\hyperlink{classa_d_d_m_a9c6c014066b0930baaa665b06dec9bb3}{theta}} * trial.\mbox{\hyperlink{class_d_d_m_trial_ae949e54554e10660f73878a07a95d14d}{valueLeft}}) -\/ trial.\mbox{\hyperlink{class_d_d_m_trial_a9e1a0900b92b8d16fb3bd49894c9dc2c}{valueRight}});}
\DoxyCodeLine{194         \}}
\DoxyCodeLine{195         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{196             mean = 0; }
\DoxyCodeLine{197         \}}
\DoxyCodeLine{198 }
\DoxyCodeLine{199         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} t = 0; t < fTime / timeStep; t++) \{}
\DoxyCodeLine{200             \textcolor{comment}{// Compute the likelihood of each change in the matrix using a probability density function with parameters mean and sigma. }}
\DoxyCodeLine{201             std::vector<std::vector<double>> probDistChangeMatrix(states.size(), std::vector<double>(states.size()));}
\DoxyCodeLine{202             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < states.size(); i++) \{}
\DoxyCodeLine{203                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < states.size(); j++) \{}
\DoxyCodeLine{204                     \textcolor{keywordtype}{float} x = changeMatrix[i][j];}
\DoxyCodeLine{205                     probDistChangeMatrix[i][j] = \mbox{\hyperlink{util_8h_a3c70684bbd5c18365b967d158305e919}{probabilityDensityFunction}}(mean, this-\/>\mbox{\hyperlink{class_d_d_m_a17570a6c2378cdb363437f39a5fa3f00}{sigma}}, x);}
\DoxyCodeLine{206                 \}}
\DoxyCodeLine{207             \}}
\DoxyCodeLine{208             \textcolor{keywordflow}{if} (debug) \{}
\DoxyCodeLine{209                 printMatrix<double>(probDistChangeMatrix, \textcolor{stringliteral}{"{}PROBABILITY CHANGE MATRIX"{}});}
\DoxyCodeLine{210             \}}
\DoxyCodeLine{211 }
\DoxyCodeLine{212             \textcolor{comment}{// Fetch the probability states for the previous timeStep}}
\DoxyCodeLine{213             std::vector<double> prTimeSlice(states.size());}
\DoxyCodeLine{214             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < states.size(); i++) \{}
\DoxyCodeLine{215                 prTimeSlice[i] = prStates[i][time -\/ 1];}
\DoxyCodeLine{216             \}}
\DoxyCodeLine{217 }
\DoxyCodeLine{218             \textcolor{comment}{// Compute the dot product between the change matrix and previous timeStep's probabilities}}
\DoxyCodeLine{219             std::vector<double> prStatesNew(states.size());}
\DoxyCodeLine{220             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < states.size(); i++) \{}
\DoxyCodeLine{221                 \textcolor{keywordtype}{double} row\_sum = 0; }
\DoxyCodeLine{222                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < states.size(); j++) \{}
\DoxyCodeLine{223                     row\_sum += stateStep * probDistChangeMatrix[i][j] * prTimeSlice[j];}
\DoxyCodeLine{224                 \}}
\DoxyCodeLine{225                 prStatesNew[i] = row\_sum;}
\DoxyCodeLine{226             \}}
\DoxyCodeLine{227 }
\DoxyCodeLine{228             \textcolor{comment}{// Check for states that are now out-\/of-\/bounds based on decay}}
\DoxyCodeLine{229             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < states.size(); i++) \{}
\DoxyCodeLine{230                 \textcolor{keywordflow}{if} (states[i] > barrierUp[time] || states[i] < barrierDown[time]) \{}
\DoxyCodeLine{231                     prStatesNew[i] = 0;}
\DoxyCodeLine{232                 \}}
\DoxyCodeLine{233             \}}
\DoxyCodeLine{234             \textcolor{keywordflow}{if} (debug) \{}
\DoxyCodeLine{235                 std::cout << \textcolor{stringliteral}{"{}PR STATES NEW"{}} << std::endl;}
\DoxyCodeLine{236                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{double} \mbox{\hyperlink{class_d_d_m_a15511d3cf0f7deb5de073dcdfd09bcc6}{d}} : prStatesNew) \{}
\DoxyCodeLine{237                     std::cout << \mbox{\hyperlink{class_d_d_m_a15511d3cf0f7deb5de073dcdfd09bcc6}{d}} << std::endl;}
\DoxyCodeLine{238                 \}}
\DoxyCodeLine{239                 std::cout << \textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/"{}} << std::endl;}
\DoxyCodeLine{240             \}}
\DoxyCodeLine{241 }
\DoxyCodeLine{242             std::vector<float> currChangeUp;}
\DoxyCodeLine{243             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} s : changeUp) \{}
\DoxyCodeLine{244                 currChangeUp.push\_back(s.at(time));}
\DoxyCodeLine{245             \}}
\DoxyCodeLine{246             std::vector<double> changeUpCDFs;}
\DoxyCodeLine{247             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < currChangeUp.size(); i++) \{}
\DoxyCodeLine{248                 \textcolor{keywordtype}{float} x = currChangeUp[i];}
\DoxyCodeLine{249                 changeUpCDFs.push\_back(}
\DoxyCodeLine{250                     1 -\/ \mbox{\hyperlink{util_8h_ab0c2fb4c0b02fabb15eeab9d6f73e5ab}{cumulativeDensityFunction}}(mean, this-\/>\mbox{\hyperlink{class_d_d_m_a17570a6c2378cdb363437f39a5fa3f00}{sigma}}, x)}
\DoxyCodeLine{251                 );}
\DoxyCodeLine{252             \}}
\DoxyCodeLine{253             assert(changeUpCDFs.size() == prTimeSlice.size());}
\DoxyCodeLine{254             \textcolor{keywordtype}{double} tempUpCross = 0;}
\DoxyCodeLine{255             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < prTimeSlice.size(); i++) \{}
\DoxyCodeLine{256                 tempUpCross += changeUpCDFs[i] * prTimeSlice[i];}
\DoxyCodeLine{257             \}}
\DoxyCodeLine{258 }
\DoxyCodeLine{259             std::vector<float> currChangeDown;}
\DoxyCodeLine{260             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} s: changeDown) \{}
\DoxyCodeLine{261                 currChangeDown.push\_back(s.at(time));}
\DoxyCodeLine{262             \}}
\DoxyCodeLine{263             std::vector<double> changeDownCDFs;}
\DoxyCodeLine{264             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < currChangeDown.size(); i++) \{}
\DoxyCodeLine{265                 \textcolor{keywordtype}{float} x = currChangeDown[i];}
\DoxyCodeLine{266                 changeDownCDFs.push\_back(}
\DoxyCodeLine{267                     \mbox{\hyperlink{util_8h_ab0c2fb4c0b02fabb15eeab9d6f73e5ab}{cumulativeDensityFunction}}(mean, this-\/>\mbox{\hyperlink{class_d_d_m_a17570a6c2378cdb363437f39a5fa3f00}{sigma}}, x)}
\DoxyCodeLine{268                 );}
\DoxyCodeLine{269             \}}
\DoxyCodeLine{270             assert(changeDownCDFs.size() == prTimeSlice.size());}
\DoxyCodeLine{271             \textcolor{keywordtype}{double} tempDownCross = 0;}
\DoxyCodeLine{272             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < prTimeSlice.size(); i++) \{}
\DoxyCodeLine{273                 tempDownCross += changeDownCDFs[i] * prTimeSlice[i];}
\DoxyCodeLine{274             \}}
\DoxyCodeLine{275 }
\DoxyCodeLine{276             \textcolor{keywordtype}{double} sumIn = 0; }
\DoxyCodeLine{277             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{double} prob : prTimeSlice) \{}
\DoxyCodeLine{278                 sumIn += prob; }
\DoxyCodeLine{279             \}}
\DoxyCodeLine{280             \textcolor{keywordtype}{double} sumCurrent = tempUpCross + tempDownCross; }
\DoxyCodeLine{281             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{double} prob : prStatesNew) \{}
\DoxyCodeLine{282                 sumCurrent += prob;}
\DoxyCodeLine{283             \}}
\DoxyCodeLine{284             \textcolor{keywordtype}{double} normFactor = sumIn / sumCurrent; }
\DoxyCodeLine{285             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < prStatesNew.size(); i++) \{}
\DoxyCodeLine{286                 prStatesNew[i] *= normFactor;}
\DoxyCodeLine{287             \}}
\DoxyCodeLine{288             tempUpCross *= normFactor;}
\DoxyCodeLine{289             tempDownCross *= normFactor; }
\DoxyCodeLine{290             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < prStates.size(); i++) \{}
\DoxyCodeLine{291                 prStates[i][time] = prStatesNew[i];}
\DoxyCodeLine{292             \}}
\DoxyCodeLine{293             probUpCrossing[time] = tempUpCross; }
\DoxyCodeLine{294             probDownCrossing[time] = tempDownCross;}
\DoxyCodeLine{295 }
\DoxyCodeLine{296             time++;}
\DoxyCodeLine{297         \}}
\DoxyCodeLine{298     \}}
\DoxyCodeLine{299     \textcolor{keywordtype}{double} likelihood = 0;}
\DoxyCodeLine{300     \textcolor{keywordflow}{if} (trial.\mbox{\hyperlink{class_d_d_m_trial_a941813496795b5c0f16d068444abf483}{choice}} == -\/1) \{}
\DoxyCodeLine{301         \textcolor{keywordflow}{if} (probUpCrossing[probUpCrossing.size() -\/ 1] > 0) \{}
\DoxyCodeLine{302             likelihood = probUpCrossing[probUpCrossing.size() -\/ 1];}
\DoxyCodeLine{303         \}}
\DoxyCodeLine{304     \}}
\DoxyCodeLine{305     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (trial.\mbox{\hyperlink{class_d_d_m_trial_a941813496795b5c0f16d068444abf483}{choice}} == 1) \{}
\DoxyCodeLine{306         \textcolor{keywordflow}{if} (probDownCrossing[probDownCrossing.size() -\/ 1] > 0) \{}
\DoxyCodeLine{307             likelihood = probDownCrossing[probDownCrossing.size() -\/ 1];}
\DoxyCodeLine{308         \}}
\DoxyCodeLine{309     \}}
\DoxyCodeLine{310     \textcolor{keywordflow}{return} likelihood;}
\DoxyCodeLine{311 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classa_d_d_m_ac9cc21a00f8516e23a0e3b15f913999b}\label{classa_d_d_m_ac9cc21a00f8516e23a0e3b15f913999b}} 
\index{aDDM@{aDDM}!simulateTrial@{simulateTrial}}
\index{simulateTrial@{simulateTrial}!aDDM@{aDDM}}
\doxysubsubsection{\texorpdfstring{simulateTrial()}{simulateTrial()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classa_d_d_m_trial}{a\+DDMTrial}} a\+DDM\+::simulate\+Trial (\begin{DoxyParamCaption}\item[{int}]{value\+Left,  }\item[{int}]{value\+Right,  }\item[{\mbox{\hyperlink{class_fixation_data}{Fixation\+Data}}}]{fixation\+Data,  }\item[{int}]{time\+Step = {\ttfamily 10},  }\item[{int}]{num\+Fix\+Dists = {\ttfamily 3},  }\item[{\mbox{\hyperlink{addm_8h_ac73e0abca434ac872480feb6a7cf4c56}{fix\+Dists}}}]{fixation\+Dist = {\ttfamily \{\}},  }\item[{vector$<$ int $>$}]{time\+Bins = {\ttfamily \{\}} }\end{DoxyParamCaption})}



Generate simulated fixations provided item values and empirical fixation data. 


\begin{DoxyParams}{Parameters}
{\em value\+Left} & value of the left item \\
\hline
{\em value\+Right} & value of the right item \\
\hline
{\em fixation\+Data} & instance of a \mbox{\hyperlink{class_fixation_data}{Fixation\+Data}} object containing empirical fixation data \\
\hline
{\em time\+Step} & value of in milliseconds used for binning time axis. \\
\hline
{\em num\+Fix\+Dists} & number of expected fixations in a given trial \\
\hline
{\em fixation\+Dist} & distribution of the fixation data being used \\
\hline
{\em time\+Bins} & predetermined time bins as used in the fixation\+Dist \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{\hyperlink{classa_d_d_m_trial}{a\+DDMTrial}} resulting from the simulation 
\end{DoxyReturn}


Definition at line 313 of file addm.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{315                                                                   \{}
\DoxyCodeLine{316 }
\DoxyCodeLine{317     srand(time(NULL));}
\DoxyCodeLine{318 }
\DoxyCodeLine{319     std::map<int, int> fixUnfixValueDiffs;}
\DoxyCodeLine{320     fixUnfixValueDiffs.insert(\{1, \mbox{\hyperlink{addm__mle_8cpp_a66ae2c9a86cab7b4970ecc123c799c45}{valueLeft}} -\/ valueRight\});}
\DoxyCodeLine{321     fixUnfixValueDiffs.insert(\{2, valueRight -\/ \mbox{\hyperlink{addm__mle_8cpp_a66ae2c9a86cab7b4970ecc123c799c45}{valueLeft}}\});}
\DoxyCodeLine{322     std::vector<int> fixItem;}
\DoxyCodeLine{323     std::vector<int> fixTime;}
\DoxyCodeLine{324     std::vector<float> fixRDV;}
\DoxyCodeLine{325 }
\DoxyCodeLine{326     std::random\_device rd;}
\DoxyCodeLine{327     \textcolor{comment}{// std::mt19937 gen(SEED);}}
\DoxyCodeLine{328     std::mt19937 gen(rd()); }
\DoxyCodeLine{329 }
\DoxyCodeLine{330     \textcolor{keywordtype}{float} RDV = this-\/>\mbox{\hyperlink{class_d_d_m_a0cecc28e691846bce6dccb02f34aef07}{bias}};}
\DoxyCodeLine{331     \textcolor{keywordtype}{int} time = 0;}
\DoxyCodeLine{332     \textcolor{keywordtype}{int} choice; }
\DoxyCodeLine{333     \textcolor{keywordtype}{int} uninterruptedLastFixTime;}
\DoxyCodeLine{334     \textcolor{keywordtype}{int} RT;}
\DoxyCodeLine{335 }
\DoxyCodeLine{336     std::vector<float>RDVs = \{RDV\};}
\DoxyCodeLine{337 }
\DoxyCodeLine{338     std::uniform\_int\_distribution<std::size\_t> ludist(0, fixationData.\mbox{\hyperlink{class_fixation_data_a07031fd2270b2693fecfb8121d246a74}{latencies}}.size() -\/ 1);}
\DoxyCodeLine{339     \textcolor{keywordtype}{int} rIDX = ludist(gen);}
\DoxyCodeLine{340     \textcolor{keywordtype}{int} latency = fixationData.\mbox{\hyperlink{class_fixation_data_a07031fd2270b2693fecfb8121d246a74}{latencies}}.at(rIDX);}
\DoxyCodeLine{341     \textcolor{keywordtype}{int} remainingNDT = this-\/>\mbox{\hyperlink{class_d_d_m_a0821be8a65988df0004b4d9f4239a020}{nonDecisionTime}} -\/ latency;}
\DoxyCodeLine{342 }
\DoxyCodeLine{343     \textcolor{comment}{// std::mt19937 gen(SEED);}}
\DoxyCodeLine{344 }
\DoxyCodeLine{345     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} t = 0; t < latency / timeStep; t++) \{}
\DoxyCodeLine{346         std::normal\_distribution<float> ndist(0, this-\/>\mbox{\hyperlink{class_d_d_m_a17570a6c2378cdb363437f39a5fa3f00}{sigma}});}
\DoxyCodeLine{347         \textcolor{keywordtype}{float} inc = ndist(gen);}
\DoxyCodeLine{348         RDV += inc;}
\DoxyCodeLine{349         RDVs.push\_back(RDV);}
\DoxyCodeLine{350 }
\DoxyCodeLine{351         \textcolor{keywordflow}{if}(RDV >= this-\/>\mbox{\hyperlink{class_d_d_m_a0293f051d7889ee014fb55c4939e4783}{barrier}} || RDV <= -\/this-\/>\mbox{\hyperlink{class_d_d_m_a0293f051d7889ee014fb55c4939e4783}{barrier}}) \{}
\DoxyCodeLine{352             \textcolor{keywordflow}{if} (RDV >= this-\/>barrier) \{}
\DoxyCodeLine{353                 choice = -\/1;}
\DoxyCodeLine{354             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{355                 choice = 1; }
\DoxyCodeLine{356             \}}
\DoxyCodeLine{357             fixRDV.push\_back(RDV);}
\DoxyCodeLine{358             fixItem.push\_back(0);}
\DoxyCodeLine{359             \textcolor{keywordtype}{int} dt = (t + 1) * timeStep;}
\DoxyCodeLine{360             fixTime.push\_back(dt);}
\DoxyCodeLine{361             time += dt;}
\DoxyCodeLine{362             RT = time;}
\DoxyCodeLine{363             uninterruptedLastFixTime = latency;}
\DoxyCodeLine{364             \textcolor{keywordflow}{return} \mbox{\hyperlink{classa_d_d_m_trial}{aDDMTrial}}(}
\DoxyCodeLine{365                 RT, choice, \mbox{\hyperlink{addm__mle_8cpp_a66ae2c9a86cab7b4970ecc123c799c45}{valueLeft}}, valueRight, }
\DoxyCodeLine{366                 fixItem, fixTime, fixRDV, uninterruptedLastFixTime);}
\DoxyCodeLine{367         \}}
\DoxyCodeLine{368     \}}
\DoxyCodeLine{369 }
\DoxyCodeLine{370     fixRDV.push\_back(RDV);}
\DoxyCodeLine{371     RDVs.push\_back(RDV);}
\DoxyCodeLine{372     fixItem.push\_back(0);}
\DoxyCodeLine{373     \textcolor{keywordtype}{int} dt = latency -\/ (latency \% timeStep);}
\DoxyCodeLine{374     fixTime.push\_back(dt);}
\DoxyCodeLine{375     time += dt;}
\DoxyCodeLine{376 }
\DoxyCodeLine{377     \textcolor{keywordtype}{int} fixNumber = 1;}
\DoxyCodeLine{378     \textcolor{keywordtype}{int} prevFixatedItem = -\/1;}
\DoxyCodeLine{379     \textcolor{keywordtype}{int} currFixLocation = 0;}
\DoxyCodeLine{380     \textcolor{keywordtype}{bool} decisionReached = \textcolor{keyword}{false};}
\DoxyCodeLine{381     \textcolor{keywordtype}{float} currFixTime;}
\DoxyCodeLine{382 }
\DoxyCodeLine{383     \textcolor{keywordflow}{while} (\textcolor{keyword}{true}) \{}
\DoxyCodeLine{384         \textcolor{keywordflow}{if} (currFixLocation == 0) \{}
\DoxyCodeLine{385             \textcolor{keywordflow}{if} (prevFixatedItem == -\/1) \{}
\DoxyCodeLine{386                 std::discrete\_distribution<> ddist(\{fixationData.\mbox{\hyperlink{class_fixation_data_ac94f66e2c75130b416982631f76580b8}{probFixLeftFirst}}, 1 -\/ fixationData.\mbox{\hyperlink{class_fixation_data_ac94f66e2c75130b416982631f76580b8}{probFixLeftFirst}}\});}
\DoxyCodeLine{387                 currFixLocation = ddist(gen) + 1;}
\DoxyCodeLine{388             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (prevFixatedItem == 1) \{}
\DoxyCodeLine{389                 currFixLocation = 2;}
\DoxyCodeLine{390             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (prevFixatedItem == 2) \{}
\DoxyCodeLine{391                 currFixLocation = 1;}
\DoxyCodeLine{392             \}}
\DoxyCodeLine{393             prevFixatedItem = currFixLocation;}
\DoxyCodeLine{394             \textcolor{comment}{// ASSUMING WE ARE USING FIXATION DATA DIST FOR NOW}}
\DoxyCodeLine{395             \textcolor{keywordflow}{if} (fixationDist.empty()) \{}
\DoxyCodeLine{396                 \textcolor{comment}{// ASSUMING SIMPLE}}
\DoxyCodeLine{397                 \textcolor{keywordflow}{if} (fixationData.\mbox{\hyperlink{class_fixation_data_abae78ac11b072c59b1821d2b2d05eeae}{fixDistType}} == \textcolor{stringliteral}{"{}simple"{}}) \{}
\DoxyCodeLine{398                     vector<float> fixTimes = fixationData.\mbox{\hyperlink{class_fixation_data_a47d55cea6c6a1ecaef33baa5e9a0f60c}{fixations}}.at(fixNumber);}
\DoxyCodeLine{399                     std::uniform\_int\_distribution<std::size\_t> fudist(0, fixTimes.size() -\/ 1);}
\DoxyCodeLine{400                     rIDX = fudist(gen);}
\DoxyCodeLine{401                     currFixTime = fixTimes.at(rIDX);}
\DoxyCodeLine{402                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{403                     \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"{}not implemented"{}});}
\DoxyCodeLine{404                 \}}
\DoxyCodeLine{405             \}}
\DoxyCodeLine{406             \textcolor{keywordflow}{if} (fixNumber < numFixDists) \{}
\DoxyCodeLine{407                 fixNumber++;}
\DoxyCodeLine{408             \}}
\DoxyCodeLine{409         \}}
\DoxyCodeLine{410         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{411             currFixLocation = 0;}
\DoxyCodeLine{412             rIDX = rand() \% fixationData.\mbox{\hyperlink{class_fixation_data_a10bd0c29fb903e681b6376d832c4d55c}{transitions}}.size();}
\DoxyCodeLine{413             currFixTime = fixationData.\mbox{\hyperlink{class_fixation_data_a10bd0c29fb903e681b6376d832c4d55c}{transitions}}.at(rIDX);}
\DoxyCodeLine{414         \}}
\DoxyCodeLine{415         \textcolor{keywordflow}{if} (remainingNDT > 0)  \{}
\DoxyCodeLine{416             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} t = 0; t < remainingNDT / timeStep; t++) \{}
\DoxyCodeLine{417                 std::normal\_distribution<float> ndist(0, this-\/>\mbox{\hyperlink{class_d_d_m_a17570a6c2378cdb363437f39a5fa3f00}{sigma}});}
\DoxyCodeLine{418                 \textcolor{keywordtype}{float} inc = ndist(gen);}
\DoxyCodeLine{419                 RDV += inc;}
\DoxyCodeLine{420                 RDVs.push\_back(RDV);}
\DoxyCodeLine{421 }
\DoxyCodeLine{422                 \textcolor{keywordflow}{if}(RDV >= this-\/>barrier || RDV <= -\/this-\/>\mbox{\hyperlink{class_d_d_m_a0293f051d7889ee014fb55c4939e4783}{barrier}}) \{}
\DoxyCodeLine{423                     \textcolor{keywordflow}{if} (RDV >= this-\/>barrier) \{}
\DoxyCodeLine{424                         choice = -\/1;}
\DoxyCodeLine{425                     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{426                         choice = 1; }
\DoxyCodeLine{427                     \}}
\DoxyCodeLine{428                     fixRDV.push\_back(RDV);}
\DoxyCodeLine{429                     fixItem.push\_back(currFixLocation);}
\DoxyCodeLine{430                     \textcolor{keywordtype}{int} dt = (t + 1) * timeStep;}
\DoxyCodeLine{431                     fixTime.push\_back(dt);}
\DoxyCodeLine{432                     time += dt;}
\DoxyCodeLine{433                     RT = time;}
\DoxyCodeLine{434                     uninterruptedLastFixTime = currFixTime;}
\DoxyCodeLine{435                     decisionReached = \textcolor{keyword}{true};}
\DoxyCodeLine{436                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{437                 \}}
\DoxyCodeLine{438             \}}
\DoxyCodeLine{439         \}}
\DoxyCodeLine{440         \textcolor{keywordflow}{if} (decisionReached) \{}
\DoxyCodeLine{441             \textcolor{keywordflow}{break};}
\DoxyCodeLine{442         \}}
\DoxyCodeLine{443         \textcolor{keywordtype}{float} remainingFixTime = max(0.0f, currFixTime -\/ max(0, remainingNDT));}
\DoxyCodeLine{444         remainingNDT -\/= currFixTime;}
\DoxyCodeLine{445 }
\DoxyCodeLine{446         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} t = 0; t < round(remainingFixTime / timeStep); t++) \{}
\DoxyCodeLine{447             \textcolor{keywordtype}{float} mean;}
\DoxyCodeLine{448             \textcolor{keywordflow}{if} (currFixLocation == 0) \{}
\DoxyCodeLine{449                 mean = 0;}
\DoxyCodeLine{450             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (currFixLocation == 1) \{}
\DoxyCodeLine{451                 mean = this-\/>\mbox{\hyperlink{class_d_d_m_a15511d3cf0f7deb5de073dcdfd09bcc6}{d}} * (\mbox{\hyperlink{addm__mle_8cpp_a66ae2c9a86cab7b4970ecc123c799c45}{valueLeft}} -\/ (this-\/>\mbox{\hyperlink{classa_d_d_m_a9c6c014066b0930baaa665b06dec9bb3}{theta}} * valueRight));}
\DoxyCodeLine{452             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (currFixLocation == 2) \{}
\DoxyCodeLine{453                 mean = this-\/>\mbox{\hyperlink{class_d_d_m_a15511d3cf0f7deb5de073dcdfd09bcc6}{d}} * ((this-\/>\mbox{\hyperlink{classa_d_d_m_a9c6c014066b0930baaa665b06dec9bb3}{theta}} * \mbox{\hyperlink{addm__mle_8cpp_a66ae2c9a86cab7b4970ecc123c799c45}{valueLeft}}) -\/ valueRight);}
\DoxyCodeLine{454             \}}
\DoxyCodeLine{455             std::normal\_distribution<float> ndist(mean, this-\/>\mbox{\hyperlink{class_d_d_m_a17570a6c2378cdb363437f39a5fa3f00}{sigma}});}
\DoxyCodeLine{456             \textcolor{keywordtype}{float} inc = ndist(gen);}
\DoxyCodeLine{457             RDV += inc;}
\DoxyCodeLine{458             RDVs.push\_back(RDV); }
\DoxyCodeLine{459 }
\DoxyCodeLine{460             \textcolor{keywordflow}{if}(RDV >= this-\/>barrier || RDV <= -\/this-\/>\mbox{\hyperlink{class_d_d_m_a0293f051d7889ee014fb55c4939e4783}{barrier}}) \{}
\DoxyCodeLine{461                 \textcolor{keywordflow}{if} (RDV >= this-\/>barrier) \{}
\DoxyCodeLine{462                     choice = -\/1;}
\DoxyCodeLine{463                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{464                     choice = 1; }
\DoxyCodeLine{465                 \}}
\DoxyCodeLine{466                 fixRDV.push\_back(RDV);}
\DoxyCodeLine{467                 fixItem.push\_back(currFixLocation);}
\DoxyCodeLine{468                 \textcolor{keywordtype}{int} dt = (t + 1) * timeStep;}
\DoxyCodeLine{469                 fixTime.push\_back(dt);}
\DoxyCodeLine{470                 time += dt;}
\DoxyCodeLine{471                 RT = time;}
\DoxyCodeLine{472                 uninterruptedLastFixTime = currFixTime;}
\DoxyCodeLine{473                 decisionReached = \textcolor{keyword}{true};}
\DoxyCodeLine{474                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{475             \}                }
\DoxyCodeLine{476         \}}
\DoxyCodeLine{477 }
\DoxyCodeLine{478         \textcolor{keywordflow}{if} (decisionReached) \{}
\DoxyCodeLine{479             \textcolor{keywordflow}{break};}
\DoxyCodeLine{480         \}}
\DoxyCodeLine{481 }
\DoxyCodeLine{482         fixRDV.push\_back(RDV);}
\DoxyCodeLine{483         fixItem.push\_back(currFixLocation);}
\DoxyCodeLine{484         \textcolor{keywordtype}{int} cft = round(currFixTime);}
\DoxyCodeLine{485         \textcolor{keywordtype}{int} dt = cft -\/ (cft \% timeStep);}
\DoxyCodeLine{486         fixTime.push\_back(dt);}
\DoxyCodeLine{487         time += dt;}
\DoxyCodeLine{488     \} }
\DoxyCodeLine{489 }
\DoxyCodeLine{490     \mbox{\hyperlink{classa_d_d_m_trial}{aDDMTrial}} trial = \mbox{\hyperlink{classa_d_d_m_trial}{aDDMTrial}}(RT, choice, \mbox{\hyperlink{addm__mle_8cpp_a66ae2c9a86cab7b4970ecc123c799c45}{valueLeft}}, valueRight, fixItem, fixTime, fixRDV, uninterruptedLastFixTime);}
\DoxyCodeLine{491     trial.\mbox{\hyperlink{classa_d_d_m_trial_afb1868d3ccccaca0d1f32c4fff6399c3}{RDVs}} = RDVs;}
\DoxyCodeLine{492     trial.\mbox{\hyperlink{class_d_d_m_trial_a6fd7d06bba895acb5cf3627343915aac}{timeStep}} = timeStep;}
\DoxyCodeLine{493     \textcolor{keywordflow}{return} trial;}
\DoxyCodeLine{494 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classa_d_d_m_a9c6c014066b0930baaa665b06dec9bb3}\label{classa_d_d_m_a9c6c014066b0930baaa665b06dec9bb3}} 
\index{aDDM@{aDDM}!theta@{theta}}
\index{theta@{theta}!aDDM@{aDDM}}
\doxysubsubsection{\texorpdfstring{theta}{theta}}
{\footnotesize\ttfamily float a\+DDM\+::theta}



Definition at line 49 of file addm.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/\mbox{\hyperlink{addm_8h}{addm.\+h}}\item 
lib/\mbox{\hyperlink{addm_8cpp}{addm.\+cpp}}\end{DoxyCompactItemize}
